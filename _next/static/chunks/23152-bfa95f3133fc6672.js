(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23152],{15452:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>j,L3:()=>B,LC:()=>k,UC:()=>er,VY:()=>eo,ZL:()=>ee,bL:()=>Z,bm:()=>ei,hE:()=>en,hJ:()=>et,l9:()=>Q,lG:()=>_});var n=r(12115),o=r(85185),i=r(6101),s=r(46081),a=r(61285),l=r(5845),u=r(19178),c=r(25519),d=r(34378),f=r(28905),h=r(63655),p=r(92293),m=r(93795),g=r(38168),y=r(99708),b=r(95155),v="Dialog",[S,w]=(0,s.A)(v),[I,x]=S(v),_=e=>{let{__scopeDialog:t,children:r,open:o,defaultOpen:i,onOpenChange:s,modal:u=!0}=e,c=n.useRef(null),d=n.useRef(null),[f,h]=(0,l.i)({prop:o,defaultProp:null!=i&&i,onChange:s,caller:v});return(0,b.jsx)(I,{scope:t,triggerRef:c,contentRef:d,contentId:(0,a.B)(),titleId:(0,a.B)(),descriptionId:(0,a.B)(),open:f,onOpenChange:h,onOpenToggle:n.useCallback(()=>h(e=>!e),[h]),modal:u,children:r})};_.displayName=v;var O="DialogTrigger",N=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,s=x(O,r),a=(0,i.s)(t,s.triggerRef);return(0,b.jsx)(h.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":$(s.open),...n,ref:a,onClick:(0,o.m)(e.onClick,s.onOpenToggle)})});N.displayName=O;var T="DialogPortal",[D,E]=S(T,{forceMount:void 0}),P=e=>{let{__scopeDialog:t,forceMount:r,children:o,container:i}=e,s=x(T,t);return(0,b.jsx)(D,{scope:t,forceMount:r,children:n.Children.map(o,e=>(0,b.jsx)(f.C,{present:r||s.open,children:(0,b.jsx)(d.Z,{asChild:!0,container:i,children:e})}))})};P.displayName=T;var A="DialogOverlay",k=n.forwardRef((e,t)=>{let r=E(A,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,i=x(A,e.__scopeDialog);return i.modal?(0,b.jsx)(f.C,{present:n||i.open,children:(0,b.jsx)(R,{...o,ref:t})}):null});k.displayName=A;var C=(0,y.TL)("DialogOverlay.RemoveScroll"),R=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=x(A,r);return(0,b.jsx)(m.A,{as:C,allowPinchZoom:!0,shards:[o.contentRef],children:(0,b.jsx)(h.sG.div,{"data-state":$(o.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),M="DialogContent",j=n.forwardRef((e,t)=>{let r=E(M,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,i=x(M,e.__scopeDialog);return(0,b.jsx)(f.C,{present:n||i.open,children:i.modal?(0,b.jsx)(z,{...o,ref:t}):(0,b.jsx)(L,{...o,ref:t})})});j.displayName=M;var z=n.forwardRef((e,t)=>{let r=x(M,e.__scopeDialog),s=n.useRef(null),a=(0,i.s)(t,r.contentRef,s);return n.useEffect(()=>{let e=s.current;if(e)return(0,g.Eq)(e)},[]),(0,b.jsx)(U,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,o.m)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:(0,o.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,o.m)(e.onFocusOutside,e=>e.preventDefault())})}),L=n.forwardRef((e,t)=>{let r=x(M,e.__scopeDialog),o=n.useRef(!1),i=n.useRef(!1);return(0,b.jsx)(U,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,s;null==(n=e.onCloseAutoFocus)||n.call(e,t),t.defaultPrevented||(o.current||null==(s=r.triggerRef.current)||s.focus(),t.preventDefault()),o.current=!1,i.current=!1},onInteractOutside:t=>{var n,s;null==(n=e.onInteractOutside)||n.call(e,t),t.defaultPrevented||(o.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));let a=t.target;(null==(s=r.triggerRef.current)?void 0:s.contains(a))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),U=n.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:a,...l}=e,d=x(M,r),f=n.useRef(null),h=(0,i.s)(t,f);return(0,p.Oh)(),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.n,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:a,children:(0,b.jsx)(u.qW,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":$(d.open),...l,ref:h,onDismiss:()=>d.onOpenChange(!1)})}),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q,{titleId:d.titleId}),(0,b.jsx)(X,{contentRef:f,descriptionId:d.descriptionId})]})]})}),F="DialogTitle",B=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=x(F,r);return(0,b.jsx)(h.sG.h2,{id:o.titleId,...n,ref:t})});B.displayName=F;var W="DialogDescription",V=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,o=x(W,r);return(0,b.jsx)(h.sG.p,{id:o.descriptionId,...n,ref:t})});V.displayName=W;var G="DialogClose",J=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=x(G,r);return(0,b.jsx)(h.sG.button,{type:"button",...n,ref:t,onClick:(0,o.m)(e.onClick,()=>i.onOpenChange(!1))})});function $(e){return e?"open":"closed"}J.displayName=G;var H="DialogTitleWarning",[Y,K]=(0,s.q)(H,{contentName:M,titleName:F,docsSlug:"dialog"}),q=e=>{let{titleId:t}=e,r=K(H),o="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return n.useEffect(()=>{t&&(document.getElementById(t)||console.error(o))},[o,t]),null},X=e=>{let{contentRef:t,descriptionId:r}=e,o=K("DialogDescriptionWarning"),i="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(o.contentName,"}.");return n.useEffect(()=>{var e;let n=null==(e=t.current)?void 0:e.getAttribute("aria-describedby");r&&n&&(document.getElementById(r)||console.warn(i))},[i,t,r]),null},Z=_,Q=N,ee=P,et=k,er=j,en=B,eo=V,ei=J},15564:(e,t,r)=>{"use strict";var n=r(49509);Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return g},defaultHead:function(){return f}});let o=r(88229),i=r(6966),s=r(95155),a=i._(r(12115)),l=o._(r(85029)),u=r(42464),c=r(82830),d=r(17544);function f(e){void 0===e&&(e=!1);let t=[(0,s.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,s.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function h(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===a.default.Fragment?e.concat(a.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}r(43230);let p=["name","httpEquiv","charSet","itemProp"];function m(e,t){let{inAmpMode:r}=t;return e.reduce(h,[]).reverse().concat(f(r).reverse()).filter(function(){let e=new Set,t=new Set,r=new Set,n={};return o=>{let i=!0,s=!1;if(o.key&&"number"!=typeof o.key&&o.key.indexOf("$")>0){s=!0;let t=o.key.slice(o.key.indexOf("$")+1);e.has(t)?i=!1:e.add(t)}switch(o.type){case"title":case"base":t.has(o.type)?i=!1:t.add(o.type);break;case"meta":for(let e=0,t=p.length;e<t;e++){let t=p[e];if(o.props.hasOwnProperty(t))if("charSet"===t)r.has(t)?i=!1:r.add(t);else{let e=o.props[t],r=n[t]||new Set;("name"!==t||!s)&&r.has(e)?i=!1:(r.add(e),n[t]=r)}}}return i}}()).reverse().map((e,t)=>{let o=e.key||t;if(n.env.__NEXT_OPTIMIZE_FONTS&&!r&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,a.default.cloneElement(e,t)}return a.default.cloneElement(e,{key:o})})}let g=function(e){let{children:t}=e,r=(0,a.useContext)(u.AmpStateContext),n=(0,a.useContext)(c.HeadManagerContext);return(0,s.jsx)(l.default,{reduceComponentsToState:m,headManager:n,inAmpMode:(0,d.isInAmpMode)(r),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},17544:(e,t)=>{"use strict";function r(e){let{ampFirst:t=!1,hybrid:r=!1,hasQuery:n=!1}=void 0===e?{}:e;return t||r&&n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return r}})},20244:(e,t,r)=>{"use strict";function n(e,t,r){let{includePage:n=!0,includeSeparator:o=!1,includeRoot:i}=r,s=[];return t.forEach((e,r)=>{if("separator"===e.type&&e.name&&o&&s.push({name:e.name}),"folder"===e.type){let n=t.at(r+1);if(n&&e.index===n)return;if(e.root){s=[];return}s.push({name:e.name,url:e.index?.url})}"page"===e.type&&n&&s.push({name:e.name,url:e.url})}),i&&s.unshift({name:e.name,url:"object"==typeof i?i.url:void 0}),s}r.d(t,{Pp:()=>n,oe:()=>function e(t,r){let n;for(let o of(r.endsWith("/")&&(r=r.slice(0,-1)),t)){if("separator"===o.type&&(n=o),"folder"===o.type){if(o.index?.url===r){let e=[];return n&&e.push(n),e.push(o,o.index),e}let t=e(o.children,r);if(t)return t.unshift(o),n&&t.unshift(n),t}if("page"===o.type&&o.url===r){let e=[];return n&&e.push(n),e.push(o),e}}return null}}),r(12115)},28011:(e,t,r)=>{"use strict";r.d(t,{T:()=>o});var n=r(12115);function o(e,t,r=function e(t,r){return Array.isArray(t)&&Array.isArray(r)?r.length!==t.length||t.some((t,n)=>e(t,r[n])):t!==r}){let[i,s]=(0,n.useState)(e);r(i,e)&&(t(e,i),s(e))}},28693:(e,t,r)=>{"use strict";r.d(t,{L:()=>c,TreeContextProvider:()=>u,t:()=>d});var n=r(95155),o=r(50344),i=r(12115),s=r(20244);let a=(0,o.q6)("TreeContext"),l=(0,o.q6)("PathContext",[]);function u(e){var t,r,u;let c=(0,i.useRef)(0),d=(0,o.a8)(),f=(0,i.useMemo)(()=>e.tree,[null!=(t=e.tree.$id)?t:e.tree]),h=(0,i.useMemo)(()=>{var e;return null!=(e=(0,s.oe)(f.children,d))?e:[]},[f,d]),p=null!=(r=h.findLast(e=>"folder"===e.type&&e.root))?r:f;return null!=p.$id||(p.$id=String(c.current++)),(0,n.jsx)(a.Provider,{value:(0,i.useMemo)(()=>({root:p}),[p]),children:(0,n.jsx)(l.Provider,{value:h,children:e.children})})}function c(){return l.use()}function d(){return a.use("You must wrap this component under <DocsLayout />")}},30263:(e,t,r)=>{"use strict";r.d(t,{G:()=>u,c:()=>l});var n=r(95155),o=r(12115),i=r(50344),s=r(63259);let a=(0,i.q6)("SidebarContext");function l(){return a.use()}function u(e){let{children:t}=e,r=(0,o.useRef)(!0),[l,u]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),f=(0,i.a8)();return(0,s.T)(f,()=>{r.current&&u(!1),r.current=!0}),(0,n.jsx)(a.Provider,{value:(0,o.useMemo)(()=>({open:l,setOpen:u,collapsed:c,setCollapsed:d,closeOnRedirect:r}),[l,c]),children:t})}},33063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return S}});let n=r(88229),o=r(6966),i=r(95155),s=o._(r(12115)),a=n._(r(47650)),l=n._(r(15564)),u=r(38883),c=r(95840),d=r(86752);r(43230);let f=r(70901),h=n._(r(51193)),p=r(6654),m={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function g(e,t,r,n,o,i,s){let a=null==e?void 0:e.src;e&&e["data-loaded-src"]!==a&&(e["data-loaded-src"]=a,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&o(!0),null==r?void 0:r.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,o=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>o,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{o=!0,t.stopPropagation()}})}(null==n?void 0:n.current)&&n.current(e)}}))}function y(e){return s.use?{fetchPriority:e}:{fetchpriority:e}}let b=(0,s.forwardRef)((e,t)=>{let{src:r,srcSet:n,sizes:o,height:a,width:l,decoding:u,className:c,style:d,fetchPriority:f,placeholder:h,loading:m,unoptimized:b,fill:v,onLoadRef:S,onLoadingCompleteRef:w,setBlurComplete:I,setShowAltText:x,sizesInput:_,onLoad:O,onError:N,...T}=e,D=(0,s.useCallback)(e=>{e&&(N&&(e.src=e.src),e.complete&&g(e,h,S,w,I,b,_))},[r,h,S,w,I,N,b,_]),E=(0,p.useMergedRef)(t,D);return(0,i.jsx)("img",{...T,...y(f),loading:m,width:l,height:a,decoding:u,"data-nimg":v?"fill":"1",className:c,style:d,sizes:o,srcSet:n,src:r,ref:E,onLoad:e=>{g(e.currentTarget,h,S,w,I,b,_)},onError:e=>{x(!0),"empty"!==h&&I(!0),N&&N(e)}})});function v(e){let{isAppRouter:t,imgAttributes:r}=e,n={as:"image",imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:r.crossOrigin,referrerPolicy:r.referrerPolicy,...y(r.fetchPriority)};return t&&a.default.preload?(a.default.preload(r.src,n),null):(0,i.jsx)(l.default,{children:(0,i.jsx)("link",{rel:"preload",href:r.srcSet?void 0:r.src,...n},"__nimg-"+r.src+r.srcSet+r.sizes)})}let S=(0,s.forwardRef)((e,t)=>{let r=(0,s.useContext)(f.RouterContext),n=(0,s.useContext)(d.ImageConfigContext),o=(0,s.useMemo)(()=>{var e;let t=m||n||c.imageConfigDefault,r=[...t.deviceSizes,...t.imageSizes].sort((e,t)=>e-t),o=t.deviceSizes.sort((e,t)=>e-t),i=null==(e=t.qualities)?void 0:e.sort((e,t)=>e-t);return{...t,allSizes:r,deviceSizes:o,qualities:i}},[n]),{onLoad:a,onLoadingComplete:l}=e,p=(0,s.useRef)(a);(0,s.useEffect)(()=>{p.current=a},[a]);let g=(0,s.useRef)(l);(0,s.useEffect)(()=>{g.current=l},[l]);let[y,S]=(0,s.useState)(!1),[w,I]=(0,s.useState)(!1),{props:x,meta:_}=(0,u.getImgProps)(e,{defaultLoader:h.default,imgConf:o,blurComplete:y,showAltText:w});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{...x,unoptimized:_.unoptimized,placeholder:_.placeholder,fill:_.fill,onLoadRef:p,onLoadingCompleteRef:g,setBlurComplete:S,setShowAltText:I,sizesInput:e.sizes,ref:t}),_.priority?(0,i.jsx)(v,{isAppRouter:!r,imgAttributes:x}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},33834:(e,t,r)=>{"use strict";r.d(t,{RootProvider:()=>w});var n=r(95155),o=r(51362),i=r(12115),s=r(94315),a=r(30263),l=r(78169),u=r(98265),c=r(29697),d=r(50344);let f=(0,i.lazy)(()=>r.e(35702).then(r.bind(r,35702)));function h(e){let{children:t,dir:r="ltr",theme:i={},search:u,i18n:c}=e,d=t;return(null==u?void 0:u.enabled)!==!1&&(d=(0,n.jsx)(l.YL,{SearchDialog:f,...u,children:d})),(null==i?void 0:i.enabled)!==!1&&(d=(0,n.jsx)(o.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,...i,children:d})),c&&(d=(0,n.jsx)(p,{...c,children:d})),(0,n.jsx)(s.FX,{dir:r,children:(0,n.jsx)(a.G,{children:d})})}function p(e){let{locales:t=[],locale:r,onLocaleChange:o,...s}=e,a=(0,d.rd)(),l=(0,d.a8)(),f=(0,u.J)(e=>{if(o)return o(e);let t=l.split("/").filter(e=>e.length>0);t[0]!==r?t.unshift(e):t[0]=e,a.push("/".concat(t.join("/"))),a.refresh()});return(0,n.jsx)(c.I18nContext.Provider,{value:(0,i.useMemo)(()=>({locale:r,locales:t,text:{...c.defaultTranslations,...s.translations},onChange:f}),[r,t,f,s.translations]),children:s.children})}var m=r(77429),g=r(18999),y=r(6874),b=r(71469),v=r.n(b);function S(e){let{children:t}=e;return(0,n.jsx)(m.Uy,{usePathname:g.usePathname,useRouter:g.useRouter,useParams:g.useParams,Link:y,Image:v(),children:t})}function w(e){return(0,n.jsx)(S,{children:(0,n.jsx)(h,{...e,children:e.children})})}r(28693),r(71339)},38883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return l}}),r(43230);let n=r(75100),o=r(95840),i=["-moz-initial","fill","none","scale-down",void 0];function s(e){return void 0!==e.default}function a(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function l(e,t){var r,l;let u,c,d,{src:f,sizes:h,unoptimized:p=!1,priority:m=!1,loading:g,className:y,quality:b,width:v,height:S,fill:w=!1,style:I,overrideSrc:x,onLoad:_,onLoadingComplete:O,placeholder:N="empty",blurDataURL:T,fetchPriority:D,decoding:E="async",layout:P,objectFit:A,objectPosition:k,lazyBoundary:C,lazyRoot:R,...M}=e,{imgConf:j,showAltText:z,blurComplete:L,defaultLoader:U}=t,F=j||o.imageConfigDefault;if("allSizes"in F)u=F;else{let e=[...F.deviceSizes,...F.imageSizes].sort((e,t)=>e-t),t=F.deviceSizes.sort((e,t)=>e-t),n=null==(r=F.qualities)?void 0:r.sort((e,t)=>e-t);u={...F,allSizes:e,deviceSizes:t,qualities:n}}if(void 0===U)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let B=M.loader||U;delete M.loader,delete M.srcSet;let W="__next_img_default"in B;if(W){if("custom"===u.loader)throw Object.defineProperty(Error('Image with src "'+f+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader'),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=B;B=t=>{let{config:r,...n}=t;return e(n)}}if(P){"fill"===P&&(w=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[P];e&&(I={...I,...e});let t={responsive:"100vw",fill:"100vw"}[P];t&&!h&&(h=t)}let V="",G=a(v),J=a(S);if((l=f)&&"object"==typeof l&&(s(l)||void 0!==l.src)){let e=s(f)?f.default:f;if(!e.src)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!e.height||!e.width)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(c=e.blurWidth,d=e.blurHeight,T=T||e.blurDataURL,V=e.src,!w)if(G||J){if(G&&!J){let t=G/e.width;J=Math.round(e.height*t)}else if(!G&&J){let t=J/e.height;G=Math.round(e.width*t)}}else G=e.width,J=e.height}let $=!m&&("lazy"===g||void 0===g);(!(f="string"==typeof f?f:V)||f.startsWith("data:")||f.startsWith("blob:"))&&(p=!0,$=!1),u.unoptimized&&(p=!0),W&&!u.dangerouslyAllowSVG&&f.split("?",1)[0].endsWith(".svg")&&(p=!0);let H=a(b),Y=Object.assign(w?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:A,objectPosition:k}:{},z?{}:{color:"transparent"},I),K=L||"empty"===N?null:"blur"===N?'url("data:image/svg+xml;charset=utf-8,'+(0,n.getImageBlurSvg)({widthInt:G,heightInt:J,blurWidth:c,blurHeight:d,blurDataURL:T||"",objectFit:Y.objectFit})+'")':'url("'+N+'")',q=i.includes(Y.objectFit)?"fill"===Y.objectFit?"100% 100%":"cover":Y.objectFit,X=K?{backgroundSize:q,backgroundPosition:Y.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:K}:{},Z=function(e){let{config:t,src:r,unoptimized:n,width:o,quality:i,sizes:s,loader:a}=e;if(n)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:u}=function(e,t,r){let{deviceSizes:n,allSizes:o}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(r);)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:o.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:o,kind:"w"}}return"number"!=typeof t?{widths:n,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>o.find(t=>t>=e)||o[o.length-1]))],kind:"x"}}(t,o,s),c=l.length-1;return{sizes:s||"w"!==u?s:"100vw",srcSet:l.map((e,n)=>a({config:t,src:r,quality:i,width:e})+" "+("w"===u?e:n+1)+u).join(", "),src:a({config:t,src:r,quality:i,width:l[c]})}}({config:u,src:f,unoptimized:p,width:G,quality:H,sizes:h,loader:B});return{props:{...M,loading:$?"lazy":g,fetchPriority:D,width:G,height:J,decoding:E,className:y,style:{...Y,...X},sizes:Z.sizes,srcSet:Z.srcSet,src:x||Z.src},meta:{unoptimized:p,priority:m,placeholder:N,fill:w}}}},42464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return n}});let n=r(88229)._(r(12115)).default.createContext({})},51193:(e,t)=>{"use strict";function r(e){var t;let{config:r,src:n,width:o,quality:i}=e,s=i||(null==(t=r.qualities)?void 0:t.reduce((e,t)=>Math.abs(t-75)<Math.abs(e-75)?t:e))||75;return r.path+"?url="+encodeURIComponent(n)+"&w="+o+"&q="+s+(n.startsWith("/_next/static/media/"),"")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),r.__next_img_default=!0;let n=r},51362:(e,t,r)=>{"use strict";r.d(t,{D:()=>u,N:()=>c});var n=r(12115),o=(e,t,r,n,o,i,s,a)=>{let l=document.documentElement,u=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&i?o.map(e=>i[e]||e):o;r?(l.classList.remove(...n),l.classList.add(i&&i[t]?i[t]:t)):l.setAttribute(e,t)}),r=t,a&&u.includes(r)&&(l.style.colorScheme=r)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}},i=["light","dark"],s="(prefers-color-scheme: dark)",a=n.createContext(void 0),l={setTheme:e=>{},themes:[]},u=()=>{var e;return null!=(e=n.useContext(a))?e:l},c=e=>n.useContext(a)?n.createElement(n.Fragment,null,e.children):n.createElement(f,{...e}),d=["light","dark"],f=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:o=!0,enableColorScheme:l=!0,storageKey:u="theme",themes:c=d,defaultTheme:f=o?"system":"light",attribute:y="data-theme",value:b,children:v,nonce:S,scriptProps:w}=e,[I,x]=n.useState(()=>p(u,f)),[_,O]=n.useState(()=>"system"===I?g():I),N=b?Object.values(b):c,T=n.useCallback(e=>{let t=e;if(!t)return;"system"===e&&o&&(t=g());let n=b?b[t]:t,s=r?m(S):null,a=document.documentElement,u=e=>{"class"===e?(a.classList.remove(...N),n&&a.classList.add(n)):e.startsWith("data-")&&(n?a.setAttribute(e,n):a.removeAttribute(e))};if(Array.isArray(y)?y.forEach(u):u(y),l){let e=i.includes(f)?f:null,r=i.includes(t)?t:e;a.style.colorScheme=r}null==s||s()},[S]),D=n.useCallback(e=>{let t="function"==typeof e?e(I):e;x(t);try{localStorage.setItem(u,t)}catch(e){}},[I]),E=n.useCallback(e=>{O(g(e)),"system"===I&&o&&!t&&T("system")},[I,t]);n.useEffect(()=>{let e=window.matchMedia(s);return e.addListener(E),E(e),()=>e.removeListener(E)},[E]),n.useEffect(()=>{let e=e=>{e.key===u&&(e.newValue?x(e.newValue):D(f))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[D]),n.useEffect(()=>{T(null!=t?t:I)},[t,I]);let P=n.useMemo(()=>({theme:I,setTheme:D,forcedTheme:t,resolvedTheme:"system"===I?_:I,themes:o?[...c,"system"]:c,systemTheme:o?_:void 0}),[I,D,t,_,o,c]);return n.createElement(a.Provider,{value:P},n.createElement(h,{forcedTheme:t,storageKey:u,attribute:y,enableSystem:o,enableColorScheme:l,defaultTheme:f,value:b,themes:c,nonce:S,scriptProps:w}),v)},h=n.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:i,enableSystem:s,enableColorScheme:a,defaultTheme:l,value:u,themes:c,nonce:d,scriptProps:f}=e,h=JSON.stringify([i,r,l,t,c,u,s,a]).slice(1,-1);return n.createElement("script",{...f,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(o.toString(),")(").concat(h,")")}})}),p=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},m=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},g=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light")},62254:e=>{e.exports={style:{fontFamily:"'Manrope', 'Manrope Fallback'",fontWeight:300,fontStyle:"normal"},className:"__className_2e05c1"}},63259:(e,t,r)=>{"use strict";r.d(t,{T:()=>n.T});var n=r(28011)},69309:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var n=r(28011),o=r(12115);function i(e,t,s,a=100,l=!1,u){let{delayMs:c=a??100,allowEmpty:d=l??!1,...f}=e;f.tag??=s,f.locale??=t;let[h,p]=(0,o.useState)(""),[m,g]=(0,o.useState)("empty"),[y,b]=(0,o.useState)(),[v,S]=(0,o.useState)(!1),w=function(e,t=1e3){let[r,n]=(0,o.useState)(e),i=(0,o.useRef)(void 0);if(0===t)return e;if(e!==r&&i.current?.value!==e){i.current&&clearTimeout(i.current.handler);let r=window.setTimeout(()=>{n(e)},t);i.current={value:e,handler:r}}return r}(h,c),I=(0,o.useRef)(void 0);return(0,n.T)([f,w],()=>{I.current&&(I.current(),I.current=void 0),S(!0);let e=!1;I.current=()=>{e=!0},(async function(){if(0===w.length&&!d)return"empty";if("fetch"===f.type){let{fetchDocs:e}=await r.e(95371).then(r.bind(r,95371));return e(w,f)}if("algolia"===f.type){let{searchDocs:e}=await r.e(77914).then(r.bind(r,77914));return e(w,f)}if("orama-cloud"===f.type){let{searchDocs:e}=await r.e(31753).then(r.bind(r,31753));return e(w,f)}if("static"===f.type){let{search:e}=await r.e(80241).then(r.bind(r,80241));return e(w,f)}throw Error("unknown search client")})().then(t=>{e||(b(void 0),g(t))}).catch(e=>{b(e)}).finally(()=>{S(!1)})},function e(t,r){if(Array.isArray(t)&&Array.isArray(r))return r.length!==t.length||t.some((t,n)=>e(t,r[n]));if("object"==typeof t&&t&&"object"==typeof r&&r){let n=Object.keys(t),o=Object.keys(r);return n.length!==o.length||n.some(n=>e(t[n],r[n]))}return t!==r}),{search:h,setSearch:p,query:{isLoading:v,data:m,error:y}}}},70901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return n}});let n=r(88229)._(r(12115)).default.createContext(null)},71363:(e,t,r)=>{"use strict";r.d(t,{vt:()=>eW});let n={arabic:"ar",armenian:"am",bulgarian:"bg",czech:"cz",danish:"dk",dutch:"nl",english:"en",finnish:"fi",french:"fr",german:"de",greek:"gr",hungarian:"hu",indian:"in",indonesian:"id",irish:"ie",italian:"it",lithuanian:"lt",nepali:"np",norwegian:"no",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"rs",slovenian:"ru",spanish:"es",swedish:"se",tamil:"ta",turkish:"tr",ukrainian:"uk",sanskrit:"sk"},o={dutch:/[^A-Za-zàèéìòóù0-9_'-]+/gim,english:/[^A-Za-zàèéìòóù0-9_'-]+/gim,french:/[^a-z0-9äâàéèëêïîöôùüûœç-]+/gim,italian:/[^A-Za-zàèéìòóù0-9_'-]+/gim,norwegian:/[^a-z0-9_æøåÆØÅäÄöÖüÜ]+/gim,portuguese:/[^a-z0-9à-úÀ-Ú]/gim,russian:/[^a-z0-9а-яА-ЯёЁ]+/gim,spanish:/[^a-z0-9A-Zá-úÁ-ÚñÑüÜ]+/gim,swedish:/[^a-z0-9_åÅäÄöÖüÜ-]+/gim,german:/[^a-z0-9A-ZäöüÄÖÜß]+/gim,finnish:/[^a-z0-9äöÄÖ]+/gim,danish:/[^a-z0-9æøåÆØÅ]+/gim,hungarian:/[^a-z0-9áéíóöőúüűÁÉÍÓÖŐÚÜŰ]+/gim,romanian:/[^a-z0-9ăâîșțĂÂÎȘȚ]+/gim,serbian:/[^a-z0-9čćžšđČĆŽŠĐ]+/gim,turkish:/[^a-z0-9çÇğĞıİöÖşŞüÜ]+/gim,lithuanian:/[^a-z0-9ąčęėįšųūžĄČĘĖĮŠŲŪŽ]+/gim,arabic:/[^a-z0-9أ-ي]+/gim,nepali:/[^a-z0-9अ-ह]+/gim,irish:/[^a-z0-9áéíóúÁÉÍÓÚ]+/gim,indian:/[^a-z0-9अ-ह]+/gim,armenian:/[^a-z0-9ա-ֆ]+/gim,greek:/[^a-z0-9α-ωά-ώ]+/gim,indonesian:/[^a-z0-9]+/gim,ukrainian:/[^a-z0-9а-яА-ЯіїєІЇЄ]+/gim,slovenian:/[^a-z0-9čžšČŽŠ]+/gim,bulgarian:/[^a-z0-9а-яА-Я]+/gim,tamil:/[^a-z0-9அ-ஹ]+/gim,sanskrit:/[^a-z0-9A-Zāīūṛḷṃṁḥśṣṭḍṇṅñḻḹṝ]+/gim,czech:/[^A-Z0-9a-zěščřžýáíéúůóťďĚŠČŘŽÝÁÍÉÓÚŮŤĎ-]+/gim},i=Object.keys(n);r(49509);let s=Date.now().toString().slice(5),a=0,l=BigInt(1e3),u=BigInt(1e6),c=BigInt(1e9);function d(){return`${s}-${a++}`}function f(e,t){return void 0===Object.hasOwn?Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0:Object.hasOwn(e,t)?e[t]:void 0}function h(e,t){let r={},n=t.length;for(let o=0;o<n;o++){let n=t[o],i=n.split("."),s=e,a=i.length;for(let e=0;e<a;e++)if("object"==typeof(s=s[i[e]])){if(null!==s&&"lat"in s&&"lon"in s&&"number"==typeof s.lat&&"number"==typeof s.lon){s=r[n]=s;break}else if(!Array.isArray(s)&&null!==s&&e===a-1){s=void 0;break}}else if((null===s||"object"!=typeof s)&&e<a-1){s=void 0;break}void 0!==s&&(r[n]=s)}return r}let p={cm:.01,m:1,km:1e3,ft:.3048,yd:.9144,mi:1609.344},m="intersection"in new Set,g="union"in new Set;function y(e,t){return g?e?e.union(t):t:new Set(e?[...e,...t]:t)}let b=i.join("\n - "),v={NO_LANGUAGE_WITH_CUSTOM_TOKENIZER:"Do not pass the language option to create when using a custom tokenizer.",LANGUAGE_NOT_SUPPORTED:`Language "%s" is not supported.
Supported languages are:
 - ${b}`,INVALID_STEMMER_FUNCTION_TYPE:"config.stemmer property must be a function.",MISSING_STEMMER:'As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the "%s" stemmer from the package @orama/stemmers. See https://docs.orama.com/open-source/text-analysis/stemming for more information.',CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY:"Custom stop words array must only contain strings.",UNSUPPORTED_COMPONENT:'Unsupported component "%s".',COMPONENT_MUST_BE_FUNCTION:'The component "%s" must be a function.',COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS:'The component "%s" must be a function or an array of functions.',INVALID_SCHEMA_TYPE:'Unsupported schema type "%s" at "%s". Expected "string", "boolean" or "number" or array of them.',DOCUMENT_ID_MUST_BE_STRING:'Document id must be of type "string". Got "%s" instead.',DOCUMENT_ALREADY_EXISTS:'A document with id "%s" already exists.',DOCUMENT_DOES_NOT_EXIST:'A document with id "%s" does not exists.',MISSING_DOCUMENT_PROPERTY:'Missing searchable property "%s".',INVALID_DOCUMENT_PROPERTY:'Invalid document property "%s": expected "%s", got "%s"',UNKNOWN_INDEX:'Invalid property name "%s". Expected a wildcard string ("*") or array containing one of the following properties: %s',INVALID_BOOST_VALUE:"Boost value must be a number greater than, or less than 0.",INVALID_FILTER_OPERATION:"You can only use one operation per filter, you requested %d.",SCHEMA_VALIDATION_FAILURE:'Cannot insert document due schema validation failure on "%s" property.',INVALID_SORT_SCHEMA_TYPE:'Unsupported sort schema type "%s" at "%s". Expected "string" or "number".',CANNOT_SORT_BY_ARRAY:'Cannot configure sort for "%s" because it is an array (%s).',UNABLE_TO_SORT_ON_UNKNOWN_FIELD:'Unable to sort on unknown field "%s". Allowed fields: %s',SORT_DISABLED:"Sort is disabled. Please read the documentation at https://docs.oramasearch for more information.",UNKNOWN_GROUP_BY_PROPERTY:'Unknown groupBy property "%s".',INVALID_GROUP_BY_PROPERTY:'Invalid groupBy property "%s". Allowed types: "%s", but given "%s".',UNKNOWN_FILTER_PROPERTY:'Unknown filter property "%s".',INVALID_VECTOR_SIZE:'Vector size must be a number greater than 0. Got "%s" instead.',INVALID_VECTOR_VALUE:'Vector value must be a number greater than 0. Got "%s" instead.',INVALID_INPUT_VECTOR:`Property "%s" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.
Input vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.`,WRONG_SEARCH_PROPERTY_TYPE:'Property "%s" is not searchable. Only "string" properties are searchable.',FACET_NOT_SUPPORTED:'Facet doens\'t support the type "%s".',INVALID_DISTANCE_SUFFIX:'Invalid distance suffix "%s". Valid suffixes are: cm, m, km, mi, yd, ft.',INVALID_SEARCH_MODE:'Invalid search mode "%s". Valid modes are: "fulltext", "vector", "hybrid".',MISSING_VECTOR_AND_SECURE_PROXY:"No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.",MISSING_TERM:'"term" is a required parameter when performing hybrid search. Please provide a search term.',INVALID_VECTOR_INPUT:'Invalid "vector" property. Expected an object with "value" and "property" properties, but got "%s" instead.',PLUGIN_CRASHED:"A plugin crashed during initialization. Please check the error message for more information:",PLUGIN_SECURE_PROXY_NOT_FOUND:`Could not find '@orama/secure-proxy-plugin' installed in your Orama instance.
Please install it before proceeding with creating an answer session.
Read more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy#plugin-secure-proxy
`,PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL:`Could not find a chat model defined in the secure proxy plugin configuration.
Please provide a chat model before proceeding with creating an answer session.
Read more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy#plugin-secure-proxy
`,ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT:"The last message in the session is not an assistant message. Cannot regenerate non-assistant messages.",PLUGIN_COMPONENT_CONFLICT:'The component "%s" is already defined. The plugin "%s" is trying to redefine it.'};function S(e,...t){let r=Error(function(e,...t){return e.replace(/%(?:(?<position>\d+)\$)?(?<width>-?\d*\.?\d*)(?<type>[dfs])/g,function(...e){let{width:r,type:n,position:o}=e[e.length-1],i=o?t[Number.parseInt(o)-1]:t.shift(),s=""===r?0:Number.parseInt(r);switch(n){case"d":return i.toString().padStart(s,"0");case"f":{let e=i,[t,n]=r.split(".").map(e=>Number.parseFloat(e));return"number"==typeof n&&n>=0&&(e=e.toFixed(n)),"number"==typeof t&&t>=0?e.toString().padStart(s,"0"):e.toString()}case"s":return s<0?i.toString().padEnd(-s," "):i.toString().padStart(s," ");default:return i}})}(v[e]??`Unsupported Orama Error code: ${e}`,...t));return r.code=e,"captureStackTrace"in Error.prototype&&Error.captureStackTrace(r),r}function w(e){var t;return{raw:Number(e),formatted:("number"==typeof(t=e)&&(t=BigInt(t)),t<l)?`${t}ns`:t<u?`${t/l}μs`:t<c?`${t/u}ms`:`${t/c}s`}}function I(e){if(e.id){if("string"!=typeof e.id)throw S("DOCUMENT_ID_MUST_BE_STRING",typeof e.id);return e.id}return d()}let x={string:!1,number:!1,boolean:!1,enum:!1,geopoint:!1,"string[]":!0,"number[]":!0,"boolean[]":!0,"enum[]":!0},_={"string[]":"string","number[]":"number","boolean[]":"boolean","enum[]":"enum"};function O(e){return"string"==typeof e&&/^vector\[\d+\]$/.test(e)}function N(e){return"string"==typeof e&&x[e]}function T(e){let t=Number(e.slice(7,-1));switch(!0){case isNaN(t):throw S("INVALID_VECTOR_VALUE",e);case t<=0:throw S("INVALID_VECTOR_SIZE",e);default:return t}}function D(e){return{internalIdToId:e.internalIdToId}}function E(e,t){let{internalIdToId:r}=t;e.internalDocumentIDStore.idToInternalId.clear(),e.internalDocumentIDStore.internalIdToId=[];let n=r.length;for(let t=0;t<n;t++){let n=r[t];e.internalDocumentIDStore.idToInternalId.set(n,t+1),e.internalDocumentIDStore.internalIdToId.push(n)}}function P(e,t){if("string"==typeof t){let r=e.idToInternalId.get(t);if(r)return r;let n=e.idToInternalId.size+1;return e.idToInternalId.set(t,n),e.internalIdToId.push(t),n}return t>e.internalIdToId.length?P(e,t.toString()):t}function A(e,t){return{sharedInternalDocumentStore:t,docs:{},count:0}}function k(e,t){let r=P(e.sharedInternalDocumentStore,t);return e.docs[r]}function C(e,t){let r=t.length,n=Array.from({length:r});for(let o=0;o<r;o++){let r=P(e.sharedInternalDocumentStore,t[o]);n[o]=e.docs[r]}return n}function R(e){return e.docs}function M(e,t,r,n){return void 0===e.docs[r]&&(e.docs[r]=n,e.count++,!0)}function j(e,t){let r=P(e.sharedInternalDocumentStore,t);return void 0!==e.docs[r]&&(delete e.docs[r],e.count--,!0)}function z(e){return e.count}function L(e,t){return{docs:t.docs,count:t.count,sharedInternalDocumentStore:e}}function U(e){return{docs:e.docs,count:e.count}}let F=["beforeInsert","afterInsert","beforeRemove","afterRemove","beforeUpdate","afterUpdate","beforeSearch","afterSearch","beforeInsertMultiple","afterInsertMultiple","beforeRemoveMultiple","afterRemoveMultiple","beforeUpdateMultiple","afterUpdateMultiple","beforeLoad","afterLoad","afterCreate"],B=["tokenizer","index","documentsStore","sorter"],W=["validateSchema","getDocumentIndexId","getDocumentProperties","formatElapsedTime"];class V{k;v;l=null;r=null;h=1;constructor(e,t){this.k=e,this.v=new Set(t)}updateHeight(){this.h=Math.max(V.getHeight(this.l),V.getHeight(this.r))+1}static getHeight(e){return e?e.h:0}getBalanceFactor(){return V.getHeight(this.l)-V.getHeight(this.r)}rotateLeft(){let e=this.r;return this.r=e.l,e.l=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.l;return this.l=e.r,e.r=this,this.updateHeight(),e.updateHeight(),e}toJSON(){return{k:this.k,v:Array.from(this.v),l:this.l?this.l.toJSON():null,r:this.r?this.r.toJSON():null,h:this.h}}static fromJSON(e){let t=new V(e.k,e.v);return t.l=e.l?V.fromJSON(e.l):null,t.r=e.r?V.fromJSON(e.r):null,t.h=e.h,t}}class G{root=null;insertCount=0;constructor(e,t){void 0!==e&&void 0!==t&&(this.root=new V(e,t))}insert(e,t,r=1e3){this.root=this.insertNode(this.root,e,t,r)}insertMultiple(e,t,r=1e3){for(let n of t)this.insert(e,n,r)}rebalance(){this.root&&(this.root=this.rebalanceNode(this.root))}toJSON(){return{root:this.root?this.root.toJSON():null,insertCount:this.insertCount}}static fromJSON(e){let t=new G;return t.root=e.root?V.fromJSON(e.root):null,t.insertCount=e.insertCount||0,t}insertNode(e,t,r,n){if(null===e)return new V(t,[r]);let o=[],i=e,s=null;for(;null!==i;)if(o.push({parent:s,node:i}),t<i.k)if(null===i.l){i.l=new V(t,[r]),o.push({parent:i,node:i.l});break}else s=i,i=i.l;else if(!(t>i.k))return i.v.add(r),e;else if(null===i.r){i.r=new V(t,[r]),o.push({parent:i,node:i.r});break}else s=i,i=i.r;let a=!1;this.insertCount++%n==0&&(a=!0);for(let t=o.length-1;t>=0;t--){let{parent:r,node:n}=o[t];if(n.updateHeight(),a){let t=this.rebalanceNode(n);r?r.l===n?r.l=t:r.r===n&&(r.r=t):e=t}}return e}rebalanceNode(e){let t=e.getBalanceFactor();if(t>1){if(e.l&&e.l.getBalanceFactor()>=0)return e.rotateRight();else if(e.l)return e.l=e.l.rotateLeft(),e.rotateRight()}if(t<-1){if(e.r&&0>=e.r.getBalanceFactor())return e.rotateLeft();else if(e.r)return e.r=e.r.rotateRight(),e.rotateLeft()}return e}find(e){let t=this.findNodeByKey(e);return t?t.v:null}contains(e){return null!==this.find(e)}getSize(){let e=0,t=[],r=this.root;for(;r||t.length>0;){for(;r;)t.push(r),r=r.l;r=t.pop(),e++,r=r.r}return e}isBalanced(){if(!this.root)return!0;let e=[this.root];for(;e.length>0;){let t=e.pop();if(Math.abs(t.getBalanceFactor())>1)return!1;t.l&&e.push(t.l),t.r&&e.push(t.r)}return!0}remove(e){this.root=this.removeNode(this.root,e)}removeDocument(e,t){let r=this.findNodeByKey(e);r&&(1===r.v.size?this.root=this.removeNode(this.root,e):r.v=new Set([...r.v.values()].filter(e=>e!==t)))}findNodeByKey(e){let t=this.root;for(;t;)if(e<t.k)t=t.l;else{if(!(e>t.k))return t;t=t.r}return null}removeNode(e,t){if(null===e)return null;let r=[],n=e;for(;null!==n&&n.k!==t;)r.push(n),n=t<n.k?n.l:n.r;if(null===n)return e;if(null===n.l||null===n.r){let t=n.l?n.l:n.r;if(0===r.length)e=t;else{let e=r[r.length-1];e.l===n?e.l=t:e.r=t}}else{let e=n,t=n.r;for(;null!==t.l;)e=t,t=t.l;n.k=t.k,n.v=t.v,e.l===t?e.l=t.r:e.r=t.r,n=e}r.push(n);for(let t=r.length-1;t>=0;t--){let n=r[t];n.updateHeight();let o=this.rebalanceNode(n);if(t>0){let e=r[t-1];e.l===n?e.l=o:e.r===n&&(e.r=o)}else e=o}return e}rangeSearch(e,t){let r=new Set,n=[],o=this.root;for(;o||n.length>0;){for(;o;)n.push(o),o=o.l;if((o=n.pop()).k>=e&&o.k<=t&&(r=y(r,o.v)),o.k>t)break;o=o.r}return r}greaterThan(e,t=!1){let r=new Set,n=[],o=this.root;for(;o||n.length>0;){for(;o;)n.push(o),o=o.r;if(o=n.pop(),t&&o.k>=e||!t&&o.k>e)r=y(r,o.v);else if(o.k<=e)break;o=o.l}return r}lessThan(e,t=!1){let r=new Set,n=[],o=this.root;for(;o||n.length>0;){for(;o;)n.push(o),o=o.l;if(o=n.pop(),t&&o.k<=e||!t&&o.k<e)r=y(r,o.v);else if(o.k>e)break;o=o.r}return r}}class J{numberToDocumentId;constructor(){this.numberToDocumentId=new Map}insert(e,t){this.numberToDocumentId.has(e)?this.numberToDocumentId.get(e).add(t):this.numberToDocumentId.set(e,new Set([t]))}find(e){let t=this.numberToDocumentId.get(e);return t?Array.from(t):null}remove(e){this.numberToDocumentId.delete(e)}removeDocument(e,t){let r=this.numberToDocumentId.get(t);r&&(r.delete(e),0===r.size&&this.numberToDocumentId.delete(t))}contains(e){return this.numberToDocumentId.has(e)}getSize(){let e=0;for(let t of this.numberToDocumentId.values())e+=t.size;return e}filter(e){let t=Object.keys(e);if(1!==t.length)throw Error("Invalid operation");let r=t[0];switch(r){case"eq":{let t=e[r],n=this.numberToDocumentId.get(t);return n?Array.from(n):[]}case"in":{let t=e[r],n=new Set;for(let e of t){let t=this.numberToDocumentId.get(e);if(t)for(let e of t)n.add(e)}return Array.from(n)}case"nin":{let t=new Set(e[r]),n=new Set;for(let[e,r]of this.numberToDocumentId.entries())if(!t.has(e))for(let e of r)n.add(e);return Array.from(n)}default:throw Error("Invalid operation")}}filterArr(e){let t=Object.keys(e);if(1!==t.length)throw Error("Invalid operation");let r=t[0];switch(r){case"containsAll":{let t=e[r].map(e=>this.numberToDocumentId.get(e)??new Set);if(0===t.length)return[];return Array.from(t.reduce((e,t)=>new Set([...e].filter(e=>t.has(e)))))}case"containsAny":{let t=e[r].map(e=>this.numberToDocumentId.get(e)??new Set);if(0===t.length)return[];return Array.from(t.reduce((e,t)=>new Set([...e,...t])))}default:throw Error("Invalid operation")}}static fromJSON(e){if(!e.numberToDocumentId)throw Error("Invalid Flat Tree JSON");let t=new J;for(let[r,n]of e.numberToDocumentId)t.numberToDocumentId.set(r,new Set(n));return t}toJSON(){return{numberToDocumentId:Array.from(this.numberToDocumentId.entries()).map(([e,t])=>[e,Array.from(t)])}}}function $(e,t,r){let n=function(e,t,r){if(r<0)return -1;if(e===t)return 0;let n=e.length,o=t.length;if(0===n)return o<=r?o:-1;if(0===o)return n<=r?n:-1;let i=Math.abs(n-o);if(e.startsWith(t))return i<=r?i:-1;if(t.startsWith(e))return 0;if(i>r)return -1;let s=[];for(let e=0;e<=n;e++){s[e]=[e];for(let t=1;t<=o;t++)s[e][t]=0===e?t:0}for(let i=1;i<=n;i++){let n=1/0;for(let r=1;r<=o;r++)e[i-1]===t[r-1]?s[i][r]=s[i-1][r-1]:s[i][r]=Math.min(s[i-1][r]+1,s[i][r-1]+1,s[i-1][r-1]+1),n=Math.min(n,s[i][r]);if(n>r)return -1}return s[n][o]<=r?s[n][o]:-1}(e,t,r);return{distance:n,isBounded:n>=0}}class H{k;s;c=new Map;d=new Set;e;w="";constructor(e,t,r){this.k=e,this.s=t,this.e=r}updateParent(e){this.w=e.w+this.s}addDocument(e){this.d.add(e)}removeDocument(e){return this.d.delete(e)}findAllWords(e,t,r,n){let o=[this];for(;o.length>0;){let i=o.pop();if(i.e){let{w:o,d:s}=i;if(r&&o!==t)continue;if(null!==f(e,o))if(n){if(!(Math.abs(t.length-o.length)<=n)||!$(t,o,n).isBounded)continue;e[o]=[]}else e[o]=[];if(null!=f(e,o)&&s.size>0){let t=e[o];for(let e of s)t.includes(e)||t.push(e)}}i.c.size>0&&o.push(...i.c.values())}return e}insert(e,t){let r=this,n=0,o=e.length;for(;n<o;){let i=e[n],s=r.c.get(i);if(s){let i=s.s,a=i.length,l=0;for(;l<a&&n+l<o&&i[l]===e[n+l];)l++;if(l===a){if(r=s,(n+=l)===o){s.e||(s.e=!0),s.addDocument(t);return}continue}let u=i.slice(0,l),c=i.slice(l),d=e.slice(n+l),f=new H(u[0],u,!1);if(r.c.set(u[0],f),f.updateParent(r),s.s=c,s.k=c[0],f.c.set(c[0],s),s.updateParent(f),d){let e=new H(d[0],d,!0);e.addDocument(t),f.c.set(d[0],e),e.updateParent(f)}else f.e=!0,f.addDocument(t);return}{let o=new H(i,e.slice(n),!0);o.addDocument(t),r.c.set(i,o),o.updateParent(r);return}}r.e||(r.e=!0),r.addDocument(t)}_findLevenshtein(e,t,r,n,o){let i=[{node:this,index:t,tolerance:r}];for(;i.length>0;){let{node:t,index:r,tolerance:s}=i.pop();if(t.w.startsWith(e)){t.findAllWords(o,e,!1,0);continue}if(s<0)continue;if(t.e){let{w:r,d:i}=t;if(r&&($(e,r,n).isBounded&&(o[r]=[]),void 0!==f(o,r)&&i.size>0)){let e=new Set(o[r]);for(let t of i)e.add(t);o[r]=Array.from(e)}}if(r>=e.length)continue;let a=e[r];if(t.c.has(a)){let e=t.c.get(a);i.push({node:e,index:r+1,tolerance:s})}for(let[e,n]of(i.push({node:t,index:r+1,tolerance:s-1}),t.c))i.push({node:n,index:r,tolerance:s-1}),e!==a&&i.push({node:n,index:r+1,tolerance:s-1})}}find(e){let{term:t,exact:r,tolerance:n}=e;if(n&&!r){let e={};return this._findLevenshtein(t,0,n,n,e),e}{let e=this,o=0,i=t.length;for(;o<i;){let s=t[o],a=e.c.get(s);if(!a)return{};{let s=a.s,l=s.length,u=0;for(;u<l&&o+u<i&&s[u]===t[o+u];)u++;if(u===l)e=a,o+=u;else{if(o+u!==i||u!==i-o||r)return{};let e={};return a.findAllWords(e,t,r,n),e}}}let s={};return e.findAllWords(s,t,r,n),s}}contains(e){let t=this,r=0,n=e.length;for(;r<n;){let o=e[r],i=t.c.get(o);if(!i)return!1;{let o=i.s,s=o.length,a=0;for(;a<s&&r+a<n&&o[a]===e[r+a];)a++;if(a<s)return!1;r+=s,t=i}}return!0}removeWord(e){if(!e)return!1;let t=this,r=e.length,n=[];for(let o=0;o<r;o++){let r=e[o];if(!t.c.has(r))return!1;{let e=t.c.get(r);n.push({parent:t,character:r}),o+=e.s.length-1,t=e}}for(t.d.clear(),t.e=!1;n.length>0&&0===t.c.size&&!t.e&&0===t.d.size;){let{parent:e,character:r}=n.pop();e.c.delete(r),t=e}return!0}removeDocumentByWord(e,t,r=!0){if(!e)return!0;let n=this,o=e.length;for(let i=0;i<o;i++){let o=e[i];if(!n.c.has(o))return!1;{let s=n.c.get(o);i+=s.s.length-1,n=s,r&&n.w!==e||n.removeDocument(t)}}return!0}static getCommonPrefix(e,t){let r=Math.min(e.length,t.length),n=0;for(;n<r&&e.charCodeAt(n)===t.charCodeAt(n);)n++;return e.slice(0,n)}toJSON(){return{w:this.w,s:this.s,e:this.e,k:this.k,d:Array.from(this.d),c:Array.from(this.c?.entries())?.map(([e,t])=>[e,t.toJSON()])}}static fromJSON(e){let t=new H(e.k,e.s,e.e);return t.w=e.w,t.d=new Set(e.d),t.c=new Map(e?.c?.map(([e,t])=>[e,H.fromJSON(t)])),t}}class Y extends H{constructor(){super("","",!1)}static fromJSON(e){let t=new Y;return t.w=e.w,t.s=e.s,t.e=e.e,t.k=e.k,t.d=new Set(e.d),t.c=new Map(e.c?.map(([e,t])=>[e,H.fromJSON(t)])),t}toJSON(){return super.toJSON()}}class K{point;docIDs;left;right;parent;constructor(e,t){this.point=e,this.docIDs=new Set(t),this.left=null,this.right=null,this.parent=null}toJSON(){return{point:this.point,docIDs:Array.from(this.docIDs),left:this.left?this.left.toJSON():null,right:this.right?this.right.toJSON():null}}static fromJSON(e,t=null){let r=new K(e.point,e.docIDs);return r.parent=t,e.left&&(r.left=K.fromJSON(e.left,r)),e.right&&(r.right=K.fromJSON(e.right,r)),r}}class q{root;nodeMap;constructor(){this.root=null,this.nodeMap=new Map}getPointKey(e){return`${e.lon},${e.lat}`}insert(e,t){let r=this.getPointKey(e),n=this.nodeMap.get(r);if(n)return void t.forEach(e=>n.docIDs.add(e));let o=new K(e,t);if(this.nodeMap.set(r,o),null==this.root){this.root=o;return}let i=this.root,s=0;for(;;){if(0==s%2)if(e.lon<i.point.lon){if(null==i.left){i.left=o,o.parent=i;return}i=i.left}else{if(null==i.right){i.right=o,o.parent=i;return}i=i.right}else if(e.lat<i.point.lat){if(null==i.left){i.left=o,o.parent=i;return}i=i.left}else{if(null==i.right){i.right=o,o.parent=i;return}i=i.right}s++}}contains(e){let t=this.getPointKey(e);return this.nodeMap.has(t)}getDocIDsByCoordinates(e){let t=this.getPointKey(e),r=this.nodeMap.get(t);return r?Array.from(r.docIDs):null}removeDocByID(e,t){let r=this.getPointKey(e),n=this.nodeMap.get(r);n&&(n.docIDs.delete(t),0===n.docIDs.size&&(this.nodeMap.delete(r),this.deleteNode(n)))}deleteNode(e){let t=e.parent,r=e.left?e.left:e.right;r&&(r.parent=t),t?t.left===e?t.left=r:t.right===e&&(t.right=r):(this.root=r,this.root&&(this.root.parent=null))}searchByRadius(e,t,r=!0,n="asc",o=!1){let i=o?q.vincentyDistance:q.haversineDistance,s=[{node:this.root,depth:0}],a=[];for(;s.length>0;){let{node:n,depth:o}=s.pop();if(null==n)continue;let l=i(e,n.point);(r?l<=t:l>t)&&a.push({point:n.point,docIDs:Array.from(n.docIDs)}),null!=n.left&&s.push({node:n.left,depth:o+1}),null!=n.right&&s.push({node:n.right,depth:o+1})}return n&&a.sort((t,r)=>{let o=i(e,t.point),s=i(e,r.point);return"asc"===n.toLowerCase()?o-s:s-o}),a}searchByPolygon(e,t=!0,r=null,n=!1){let o=[{node:this.root,depth:0}],i=[];for(;o.length>0;){let{node:r,depth:n}=o.pop();if(null==r)continue;null!=r.left&&o.push({node:r.left,depth:n+1}),null!=r.right&&o.push({node:r.right,depth:n+1});let s=q.isPointInPolygon(e,r.point);(s&&t||!s&&!t)&&i.push({point:r.point,docIDs:Array.from(r.docIDs)})}let s=q.calculatePolygonCentroid(e);if(r){let e=n?q.vincentyDistance:q.haversineDistance;i.sort((t,n)=>{let o=e(s,t.point),i=e(s,n.point);return"asc"===r.toLowerCase()?o-i:i-o})}return i}toJSON(){return{root:this.root?this.root.toJSON():null}}static fromJSON(e){let t=new q;return e.root&&(t.root=K.fromJSON(e.root),t.buildNodeMap(t.root)),t}buildNodeMap(e){if(null==e)return;let t=this.getPointKey(e.point);this.nodeMap.set(t,e),e.left&&this.buildNodeMap(e.left),e.right&&this.buildNodeMap(e.right)}static calculatePolygonCentroid(e){let t=0,r=0,n=0,o=e.length;for(let i=0,s=o-1;i<o;s=i++){let o=e[i].lon,a=e[i].lat,l=e[s].lon,u=e[s].lat,c=o*u-l*a;t+=c,r+=(o+l)*c,n+=(a+u)*c}let i=6*(t/=2);return{lon:r/=i,lat:n/=i}}static isPointInPolygon(e,t){let r=!1,n=t.lon,o=t.lat,i=e.length;for(let t=0,s=i-1;t<i;s=t++){let i=e[t].lon,a=e[t].lat,l=e[s].lon,u=e[s].lat;a>o!=u>o&&n<(l-i)*(o-a)/(u-a)+i&&(r=!r)}return r}static haversineDistance(e,t){let r=Math.PI/180,n=e.lat*r,o=t.lat*r,i=(t.lat-e.lat)*r,s=(t.lon-e.lon)*r,a=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(o)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371e3}static vincentyDistance(e,t){let r,n,o,i,s,a,l,u=1/298.257223563,c=(1-1/298.257223563)*6378137,d=Math.PI/180,f=e.lat*d,h=t.lat*d,p=(t.lon-e.lon)*d,m=Math.atan((1-u)*Math.tan(f)),g=Math.atan((1-u)*Math.tan(h)),y=Math.sin(m),b=Math.cos(m),v=Math.sin(g),S=Math.cos(g),w=p,I=1e3;do{let e=Math.sin(w),t=Math.cos(w);if(0===(n=Math.sqrt(S*e*(S*e)+(b*v-y*S*t)*(b*v-y*S*t))))return 0;i=Math.atan2(n,o=y*v+b*S*t),isNaN(l=o-2*y*v/(a=1-(s=b*S*e/n)*s))&&(l=0);let c=u/16*a*(4+u*(4-3*a));r=w,w=p+(1-c)*u*s*(i+c*n*(l+c*o*(-1+2*l*l)))}while(Math.abs(w-r)>1e-12&&--I>0);if(0===I)return NaN;let x=a*(0x24ffb2985f71-c*c)/(c*c),_=1+x/16384*(4096+x*(-768+x*(320-175*x))),O=x/1024*(256+x*(-128+x*(74-47*x)));return c*_*(i-O*n*(l+O/4*(o*(-1+2*l*l)-O/6*l*(-3+4*n*n)*(-3+4*l*l))))}}class X{true;false;constructor(){this.true=new Set,this.false=new Set}insert(e,t){t?this.true.add(e):this.false.add(e)}delete(e,t){t?this.true.delete(e):this.false.delete(e)}getSize(){return this.true.size+this.false.size}toJSON(){return{true:Array.from(this.true),false:Array.from(this.false)}}static fromJSON(e){let t=new X;return t.true=new Set(e.true),t.false=new Set(e.false),t}}class Z{size;vectors=new Map;constructor(e){this.size=e}add(e,t){t instanceof Float32Array||(t=new Float32Array(t));let r=Q(t,this.size);this.vectors.set(e,[r,t])}remove(e){this.vectors.delete(e)}find(e,t,r){return e instanceof Float32Array||(e=new Float32Array(e)),function(e,t,r,n,o){let i=Q(e,n),s=[];for(let a of t||r.keys()){let t=r.get(a);if(!t)continue;let l=t[0],u=t[1],c=0;for(let t=0;t<n;t++)c+=e[t]*u[t];let d=c/(i*l);d>=o&&s.push([a,d])}return s}(e,r,this.vectors,this.size,t)}toJSON(){let e=[];for(let[t,[r,n]]of this.vectors)e.push([t,[r,Array.from(n)]]);return{size:this.size,vectors:e}}static fromJSON(e){let t=new Z(e.size);for(let[r,[n,o]]of e.vectors)t.vectors.set(r,[n,new Float32Array(o)]);return t}}function Q(e,t){let r=0;for(let n=0;n<t;n++)r+=e[n]*e[n];return Math.sqrt(r)}function ee(e,t,r,n,o){let i=P(e.sharedInternalDocumentStore,r);e.avgFieldLength[t]=((e.avgFieldLength[t]??0)*(o-1)+n.length)/o,e.fieldLengths[t][i]=n.length,e.frequencies[t][i]={}}function et(e,t,r,n,o){let i=0;for(let e of n)e===o&&i++;let s=P(e.sharedInternalDocumentStore,r),a=i/n.length;e.frequencies[t][s][o]=a,o in e.tokenOccurrences[t]||(e.tokenOccurrences[t][o]=0),e.tokenOccurrences[t][o]=(e.tokenOccurrences[t][o]??0)+1}function er(e,t,r,n){let o=P(e.sharedInternalDocumentStore,r);n>1?e.avgFieldLength[t]=(e.avgFieldLength[t]*n-e.fieldLengths[t][o])/(n-1):e.avgFieldLength[t]=void 0,e.fieldLengths[t][o]=void 0,e.frequencies[t][o]=void 0}function en(e,t,r){e.tokenOccurrences[t][r]--}function eo(e,t,r,n,o,i,s,a,l,u,c){if(O(s)){var d,f,h,p,m;return d=t,f=r,h=i,p=0,m=o,void d.vectorIndexes[f].node.add(m,h)}let g=n=>{let{type:i,node:s}=t.indexes[r];switch(i){case"Bool":s[n?"true":"false"].add(o);break;case"AVL":{let e=c?.avlRebalanceThreshold??1;s.insert(n,o,e);break}case"Radix":{let i=l.tokenize(n,a,r,!1);for(let n of(e.insertDocumentScoreParameters(t,r,o,i,u),i))e.insertTokenScoreParameters(t,r,o,i,n),s.insert(n,o);break}case"Flat":s.insert(n,o);break;case"BKD":s.insert(n,[o])}};if(!N(s))return g(i);let y=i.length;for(let e=0;e<y;e++)g(i[e])}function ei(e,t,r,n,o,i,s,a,l,u){if(O(s))return t.vectorIndexes[r].node.remove(o),!0;let{type:c,node:d}=t.indexes[r];switch(c){case"AVL":return d.removeDocument(i,o),!0;case"Bool":return d[i?"true":"false"].delete(o),!0;case"Radix":{let s=l.tokenize(i,a,r);for(let i of(e.removeDocumentScoreParameters(t,r,n,u),s))e.removeTokenScoreParameters(t,r,i),d.removeDocumentByWord(i,o);return!0}case"Flat":return d.removeDocument(o,i),!0;case"BKD":return d.removeDocByID(i,o),!1}}function es(e,t,r,n,o,i,s,a,l,u){if(!N(s))return ei(e,t,r,n,o,i,s,a,l,u);let c=_[s],d=i.length;for(let s=0;s<d;s++)ei(e,t,r,n,o,i[s],c,a,l,u);return!0}function ea(e,t,r,n,o,i,s,a,l,u){let c=Array.from(n),d=e.avgFieldLength[t],f=e.fieldLengths[t],h=e.tokenOccurrences[t],p=e.frequencies[t],m="number"==typeof h[r]?h[r]??0:0,g=c.length;for(let e=0;e<g;e++){let n=c[e];if(l&&!l.has(n))continue;u.has(n)||u.set(n,new Map);let h=u.get(n);h.set(t,(h.get(t)||0)+1);let g=function(e,t,r,n,o,{k:i,b:s,d:a}){return Math.log(1+(r-t+.5)/(t+.5))*(a+e*(i+1))/(e+i*(1-s+s*n/o))}(p?.[n]?.[r]??0,m,o,f[n],d,i);s.has(n)?s.set(n,s.get(n)+g*a):s.set(n,g*a)}}function el(e,t,r,n,o,i,s,a,l,u,c,d=0){let f=r.tokenize(t,n),h=f.length||1,p=new Map,m=new Map,g=new Map;for(let r of o){if(!(r in e.indexes))continue;let n=e.indexes[r],{type:o}=n;if("Radix"!==o)throw S("WRONG_SEARCH_PROPERTY_TYPE",r);let d=a[r]??1;if(d<=0)throw S("INVALID_BOOST_VALUE",d);0!==f.length||t||f.push("");let h=f.length;for(let t=0;t<h;t++){let o=f[t],a=n.node.find({term:o,exact:i,tolerance:s}),h=Object.keys(a);h.length>0&&m.set(o,!0);let y=h.length;for(let t=0;t<y;t++){let n=h[t],o=a[n];ea(e,r,n,o,u,l,g,d,c,p)}}}let y=Array.from(g.entries()).map(([e,t])=>[e,t]).sort((e,t)=>t[1]-e[1]);if(0===y.length)return[];if(1===d)return y;if(0===d){if(1===h)return y;for(let e of f)if(!m.get(e))return[];return y.filter(([e])=>{let t=p.get(e);return!!t&&Array.from(t.values()).some(e=>e===h)})}let b=y.filter(([e])=>{let t=p.get(e);return!!t&&Array.from(t.values()).some(e=>e===h)});if(b.length>0){let e=y.filter(([e])=>!b.some(([t])=>t===e)),t=Math.ceil(e.length*d);return[...b,...e.slice(0,t)]}return y}function eu(e,t,r,n){let o=Object.keys(r),i=o.reduce((e,t)=>({[t]:new Set,...e}),{});for(let s of o){let o=r[s];if(void 0===e.indexes[s])throw S("UNKNOWN_FILTER_PROPERTY",s);let{node:a,type:l,isArray:u}=e.indexes[s];if("Bool"===l){let e=o?a.true:a.false;i[s]=y(i[s],e);continue}if("BKD"===l){let e;if("radius"in o)e="radius";else if("polygon"in o)e="polygon";else throw Error(`Invalid operation ${o}`);if("radius"===e){let{value:t,coordinates:r,unit:n="m",inside:l=!0,highPrecision:u=!1}=o[e],c=function(e,t){let r=p[t];if(void 0===r)throw Error(S("INVALID_DISTANCE_SUFFIX",e).message);return e*r}(t,n),d=a.searchByRadius(r,c,l,void 0,u);i[s]=ep(i[s],d)}else{let{coordinates:t,inside:r=!0,highPrecision:n=!1}=o[e],l=a.searchByPolygon(t,r,void 0,n);i[s]=ep(i[s],l)}continue}if("Radix"===l&&("string"==typeof o||Array.isArray(o))){for(let e of[o].flat())for(let r of t.tokenize(e,n,s)){let e=a.find({term:r,exact:!0});i[s]=function(e,t){e||(e=new Set);let r=Object.keys(t),n=r.length;for(let o=0;o<n;o++){let n=t[r[o]],i=n.length;for(let t=0;t<i;t++)e.add(n[t])}return e}(i[s],e)}continue}let c=Object.keys(o);if(c.length>1)throw S("INVALID_FILTER_OPERATION",c.length);if("Flat"===l){let e=new Set(u?a.filterArr(o):a.filter(o));i[s]=y(i[s],e);continue}if("AVL"===l){let e,t=c[0],r=o[t];switch(t){case"gt":e=a.greaterThan(r,!1);break;case"gte":e=a.greaterThan(r,!0);break;case"lt":e=a.lessThan(r,!1);break;case"lte":e=a.lessThan(r,!0);break;case"eq":e=a.find(r)??new Set;break;case"between":{let[t,n]=r;e=a.rangeSearch(t,n);break}default:throw S("INVALID_FILTER_OPERATION",t)}i[s]=y(i[s],e)}}return function(...e){if(0===e.length)return new Set;if(1===e.length)return e[0];if(2===e.length){let t=e[0],r=e[1];if(m)return t.intersection(r);let n=new Set,o=t.size<r.size?t:r,i=o===t?r:t;for(let e of o)i.has(e)&&n.add(e);return n}let t={index:0,size:e[0].size};for(let r=1;r<e.length;r++)e[r].size<t.size&&(t.index=r,t.size=e[r].size);if(m){let r=e[t.index];for(let n=0;n<e.length;n++)n!==t.index&&(r=r.intersection(e[n]));return r}let r=e[t.index];for(let n=0;n<e.length;n++){if(n===t.index)continue;let o=e[n];for(let e of r)o.has(e)||r.delete(e)}return r}(...Object.values(i))}function ec(e){return e.searchableProperties}function ed(e){return e.searchablePropertiesWithTypes}function ef(e,t){let{indexes:r,vectorIndexes:n,searchableProperties:o,searchablePropertiesWithTypes:i,frequencies:s,tokenOccurrences:a,avgFieldLength:l,fieldLengths:u}=t,c={},d={};for(let e of Object.keys(r)){let{node:t,type:n,isArray:o}=r[e];switch(n){case"Radix":c[e]={type:"Radix",node:Y.fromJSON(t),isArray:o};break;case"Flat":c[e]={type:"Flat",node:J.fromJSON(t),isArray:o};break;case"AVL":c[e]={type:"AVL",node:G.fromJSON(t),isArray:o};break;case"BKD":c[e]={type:"BKD",node:q.fromJSON(t),isArray:o};break;case"Bool":c[e]={type:"Bool",node:X.fromJSON(t),isArray:o};break;default:c[e]=r[e]}}for(let e of Object.keys(n))d[e]={type:"Vector",isArray:!1,node:Z.fromJSON(n[e])};return{sharedInternalDocumentStore:e,indexes:c,vectorIndexes:d,searchableProperties:o,searchablePropertiesWithTypes:i,frequencies:s,tokenOccurrences:a,avgFieldLength:l,fieldLengths:u}}function eh(e){let{indexes:t,vectorIndexes:r,searchableProperties:n,searchablePropertiesWithTypes:o,frequencies:i,tokenOccurrences:s,avgFieldLength:a,fieldLengths:l}=e,u={};for(let e of Object.keys(r))u[e]=r[e].node.toJSON();let c={};for(let e of Object.keys(t)){let{type:r,node:n,isArray:o}=t[e];"Flat"===r||"Radix"===r||"AVL"===r||"BKD"===r||"Bool"===r?c[e]={type:r,node:n.toJSON(),isArray:o}:(c[e]=t[e],c[e].node=c[e].node.toJSON())}return{indexes:c,vectorIndexes:u,searchableProperties:n,searchablePropertiesWithTypes:o,frequencies:i,tokenOccurrences:s,avgFieldLength:a,fieldLengths:l}}function ep(e,t){e||(e=new Set);let r=t.length;for(let n=0;n<r;n++){let r=t[n].docIDs,o=r.length;for(let t=0;t<o;t++)e.add(r[t])}return e}function em(e,t,r,n){return n?.enabled===!1?{disabled:!0}:function e(t,r,n,o,i){let s={language:t.tokenizer.language,sharedInternalDocumentStore:r,enabled:!0,isSorted:!0,sortableProperties:[],sortablePropertiesWithTypes:{},sorts:{}};for(let[a,l]of Object.entries(n)){let n=`${i}${i?".":""}${a}`;if(!o.includes(n)){if("object"==typeof l&&!Array.isArray(l)){let i=e(t,r,l,o,n);!function(e,t){if(t.length<65535)Array.prototype.push.apply(e,t);else{let r=t.length;for(let n=0;n<r;n+=65535)Array.prototype.push.apply(e,t.slice(n,n+65535))}}(s.sortableProperties,i.sortableProperties),s.sorts={...s.sorts,...i.sorts},s.sortablePropertiesWithTypes={...s.sortablePropertiesWithTypes,...i.sortablePropertiesWithTypes};continue}if(!O(l))switch(l){case"boolean":case"number":case"string":s.sortableProperties.push(n),s.sortablePropertiesWithTypes[n]=l,s.sorts[n]={docs:new Map,orderedDocsToRemove:new Map,orderedDocs:[],type:l};break;case"geopoint":case"enum":case"enum[]":case"boolean[]":case"number[]":case"string[]":continue;default:throw S("INVALID_SORT_SCHEMA_TYPE",Array.isArray(l)?"array":l,n)}}}return s}(e,t,r,(n||{}).unsortableProperties||[],"")}function eg(e,t,r,n){if(!e.enabled)return;e.isSorted=!1;let o=P(e.sharedInternalDocumentStore,r),i=e.sorts[t];i.orderedDocsToRemove.has(o)&&ew(e,t),i.docs.set(o,i.orderedDocs.length),i.orderedDocs.push([o,n])}function ey(e){if(!e.isSorted&&e.enabled){for(let t of Object.keys(e.sorts))!function(e,t){let r,n=e.sorts[t];switch(n.type){case"string":r=eb.bind(null,e.language);break;case"number":r=ev.bind(null);break;case"boolean":r=eS.bind(null)}n.orderedDocs.sort(r);let o=n.orderedDocs.length;for(let e=0;e<o;e++){let t=n.orderedDocs[e][0];n.docs.set(t,e)}}(e,t);e.isSorted=!0}}function eb(e,t,r){return t[1].localeCompare(r[1],void 0!==e&&i.includes(e)?n[e]:void 0)}function ev(e,t){return e[1]-t[1]}function eS(e,t){return t[1]?-1:1}function ew(e,t){let r=e.sorts[t];r.orderedDocsToRemove.size&&(r.orderedDocs=r.orderedDocs.filter(e=>!r.orderedDocsToRemove.has(e[0])),r.orderedDocsToRemove.clear())}function eI(e,t,r){if(!e.enabled)return;let n=e.sorts[t],o=P(e.sharedInternalDocumentStore,r);n.docs.get(o)&&(n.docs.delete(o),n.orderedDocsToRemove.set(o,!0))}function ex(e,t,r){if(!e.enabled)throw S("SORT_DISABLED");let n=r.property,o="DESC"===r.order,i=e.sorts[n];if(!i)throw S("UNABLE_TO_SORT_ON_UNKNOWN_FIELD",n,e.sortableProperties.join(", "));return ew(e,n),ey(e),t.sort((t,r)=>{let n=i.docs.get(P(e.sharedInternalDocumentStore,t[0])),s=i.docs.get(P(e.sharedInternalDocumentStore,r[0])),a=void 0!==n,l=void 0!==s;return a||l?a?l?o?s-n:n-s:-1:1:0}),t}function e_(e){return e.enabled?e.sortableProperties:[]}function eO(e){return e.enabled?e.sortablePropertiesWithTypes:{}}function eN(e,t){if(!t.enabled)return{enabled:!1};let r=Object.keys(t.sorts).reduce((e,r)=>{let{docs:n,orderedDocs:o,type:i}=t.sorts[r];return e[r]={docs:new Map(Object.entries(n).map(([e,t])=>[+e,t])),orderedDocsToRemove:new Map,orderedDocs:o,type:i},e},{});return{sharedInternalDocumentStore:e,language:t.language,sortableProperties:t.sortableProperties,sortablePropertiesWithTypes:t.sortablePropertiesWithTypes,sorts:r,enabled:!0,isSorted:t.isSorted}}function eT(e){if(!e.enabled)return{enabled:!1};for(let t of Object.keys(e.sorts))ew(e,t);ey(e);let t=Object.keys(e.sorts).reduce((t,r)=>{let{docs:n,orderedDocs:o,type:i}=e.sorts[r];return t[r]={docs:Object.fromEntries(n.entries()),orderedDocs:o,type:i},t},{});return{language:e.language,sortableProperties:e.sortableProperties,sortablePropertiesWithTypes:e.sortablePropertiesWithTypes,sorts:t,enabled:e.enabled,isSorted:e.isSorted}}let eD=[65,65,65,65,65,65,65,67,69,69,69,69,73,73,73,73,69,78,79,79,79,79,79,null,79,85,85,85,85,89,80,115,97,97,97,97,97,97,97,99,101,101,101,101,105,105,105,105,101,110,111,111,111,111,111,null,111,117,117,117,117,121,112,121,65,97,65,97,65,97,67,99,67,99,67,99,67,99,68,100,68,100,69,101,69,101,69,101,69,101,69,101,71,103,71,103,71,103,71,103,72,104,72,104,73,105,73,105,73,105,73,105,73,105,73,105,74,106,75,107,107,76,108,76,108,76,108,76,108,76,108,78,110,78,110,78,110,110,78,110,79,111,79,111,79,111,79,111,82,114,82,114,82,114,83,115,83,115,83,115,83,115,84,116,84,116,84,116,85,117,85,117,85,117,85,117,85,117,85,117,87,119,89,121,89,90,122,90,122,90,122,115],eE={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},eP={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},eA="[aeiouy]",ek="[^aeiou][^aeiouy]*",eC=eA+"[aeiou]*",eR="^("+ek+")?"+eC+ek,eM="^("+ek+")?"+eC+ek+"("+eC+")?$",ej="^("+ek+")?"+eC+ek+eC+ek,ez="^("+ek+")?"+eA;function eL(e){let t,r,n,o,i,s;if(e.length<3)return e;let a=e.substring(0,1);if("y"==a&&(e=a.toUpperCase()+e.substring(1)),o=/^(.+?)([^s])s$/,(n=/^(.+?)(ss|i)es$/).test(e)?e=e.replace(n,"$1$2"):o.test(e)&&(e=e.replace(o,"$1$2")),o=/^(.+?)(ed|ing)$/,(n=/^(.+?)eed$/).test(e)){let t=n.exec(e);(n=new RegExp(eR)).test(t[1])&&(n=/.$/,e=e.replace(n,""))}else o.test(e)&&(t=o.exec(e)[1],(o=new RegExp(ez)).test(t)&&(e=t,o=/(at|bl|iz)$/,i=RegExp("([^aeiouylsz])\\1$"),s=RegExp("^"+ek+eA+"[^aeiouwxy]$"),o.test(e)?e+="e":i.test(e)?(n=/.$/,e=e.replace(n,"")):s.test(e)&&(e+="e")));if((n=/^(.+?)y$/).test(e)){let r=n.exec(e);t=r?.[1],n=new RegExp(ez),t&&n.test(t)&&(e=t+"i")}if((n=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/).test(e)){let o=n.exec(e);t=o?.[1],r=o?.[2],n=new RegExp(eR),t&&n.test(t)&&(e=t+eE[r])}if((n=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/).test(e)){let o=n.exec(e);t=o?.[1],r=o?.[2],n=new RegExp(eR),t&&n.test(t)&&(e=t+eP[r])}if(o=/^(.+?)(s|t)(ion)$/,(n=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/).test(e)){let r=n.exec(e);t=r?.[1],n=new RegExp(ej),t&&n.test(t)&&(e=t)}else if(o.test(e)){let r=o.exec(e);t=r?.[1]??""+r?.[2]??"",(o=new RegExp(ej)).test(t)&&(e=t)}if((n=/^(.+?)e$/).test(e)){let r=n.exec(e);t=r?.[1],n=new RegExp(ej),o=new RegExp(eM),i=RegExp("^"+ek+eA+"[^aeiouwxy]$"),t&&(n.test(t)||o.test(t)&&!i.test(t))&&(e=t)}return n=/ll$/,o=new RegExp(ej),n.test(e)&&o.test(e)&&(n=/.$/,e=e.replace(n,"")),"y"==a&&(e=a.toLowerCase()+e.substring(1)),e}function eU(e,t,r=!0){let n=`${this.language}:${e}:${t}`;return r&&this.normalizationCache.has(n)?this.normalizationCache.get(n):this.stopWords?.includes(t)?(r&&this.normalizationCache.set(n,""),""):(this.stemmer&&!this.stemmerSkipProperties.has(e)&&(t=this.stemmer(t)),t=function(e){let t=[];for(let n=0;n<e.length;n++){var r;t[n]=(r=e.charCodeAt(n))<192||r>383?r:eD[r-192]||r}return String.fromCharCode(...t)}(t),r&&this.normalizationCache.set(n,t),t)}function eF(e,t,r,n=!0){let i;if(t&&t!==this.language)throw S("LANGUAGE_NOT_SUPPORTED",t);if("string"!=typeof e)return[e];let s=this.normalizeToken.bind(this,r??"");if(r&&this.tokenizeSkipProperties.has(r))i=[s(e,n)];else{let t=o[this.language];i=e.toLowerCase().split(t).map(e=>s(e,n)).filter(Boolean)}let a=function(e){for(;""===e[e.length-1];)e.pop();for(;""===e[0];)e.shift();return e}(i);return this.allowDuplicates?a:Array.from(new Set(a))}function eB(e={}){let t,r;if(e.language){if(!i.includes(e.language))throw S("LANGUAGE_NOT_SUPPORTED",e.language)}else e.language="english";if(e.stemming||e.stemmer&&!("stemming"in e))if(e.stemmer){if("function"!=typeof e.stemmer)throw S("INVALID_STEMMER_FUNCTION_TYPE");t=e.stemmer}else if("english"===e.language)t=eL;else throw S("MISSING_STEMMER",e.language);if(!1!==e.stopWords){if(r=[],Array.isArray(e.stopWords))r=e.stopWords;else if("function"==typeof e.stopWords)r=e.stopWords(r);else if(e.stopWords)throw S("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");if(!Array.isArray(r))throw S("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");for(let e of r)if("string"!=typeof e)throw S("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY")}let n={tokenize:eF,language:e.language,stemmer:t,stemmerSkipProperties:new Set(e.stemmerSkipProperties?[e.stemmerSkipProperties].flat():[]),tokenizeSkipProperties:new Set(e.tokenizeSkipProperties?[e.tokenizeSkipProperties].flat():[]),stopWords:r,allowDuplicates:!!e.allowDuplicates,normalizeToken:eU,normalizationCache:new Map};return n.tokenize=eF.bind(n),n.normalizeToken=eU,n}function eW({schema:e,sort:t,language:r,components:n,id:o,plugins:i}){for(let t of(n||(n={}),i??[])){if(!("getComponents"in t)||"function"!=typeof t.getComponents)continue;let r=t.getComponents(e);for(let e of Object.keys(r))if(n[e])throw S("PLUGIN_COMPONENT_CONFLICT",e,t.name);n={...n,...r}}o||(o=d());let s=n.tokenizer,a=n.index,l=n.documentsStore,u=n.sorter;if(s=s?s.tokenize?s:eB(s):eB({language:r??"english"}),n.tokenizer&&r)throw S("NO_LANGUAGE_WITH_CUSTOM_TOKENIZER");let c={idToInternalId:new Map,internalIdToId:[],save:D,load:E};a||={create:function e(t,r,n,o,i=""){for(let[s,a]of(o||(o={sharedInternalDocumentStore:r,indexes:{},vectorIndexes:{},searchableProperties:[],searchablePropertiesWithTypes:{},frequencies:{},tokenOccurrences:{},avgFieldLength:{},fieldLengths:{}}),Object.entries(n))){let n=`${i}${i?".":""}${s}`;if("object"==typeof a&&!Array.isArray(a)){e(t,r,a,o,n);continue}if(O(a))o.searchableProperties.push(n),o.searchablePropertiesWithTypes[n]=a,o.vectorIndexes[n]={type:"Vector",node:new Z(T(a)),isArray:!1};else{let e=/\[/.test(a);switch(a){case"boolean":case"boolean[]":o.indexes[n]={type:"Bool",node:new X,isArray:e};break;case"number":case"number[]":o.indexes[n]={type:"AVL",node:new G(0,[]),isArray:e};break;case"string":case"string[]":o.indexes[n]={type:"Radix",node:new Y,isArray:e},o.avgFieldLength[n]=0,o.frequencies[n]={},o.tokenOccurrences[n]={},o.fieldLengths[n]={};break;case"enum":case"enum[]":o.indexes[n]={type:"Flat",node:new J,isArray:e};break;case"geopoint":o.indexes[n]={type:"BKD",node:new q,isArray:e};break;default:throw S("INVALID_SCHEMA_TYPE",Array.isArray(a)?"array":a,n)}o.searchableProperties.push(n),o.searchablePropertiesWithTypes[n]=a}}return o},insert:eo,remove:es,insertDocumentScoreParameters:ee,insertTokenScoreParameters:et,removeDocumentScoreParameters:er,removeTokenScoreParameters:en,calculateResultScores:ea,search:el,searchByWhereClause:eu,getSearchableProperties:ec,getSearchablePropertiesWithTypes:ed,load:ef,save:eh},u||={create:em,insert:eg,remove:eI,save:eT,load:eN,sortBy:ex,getSortableProperties:e_,getSortablePropertiesWithTypes:eO},l||={create:A,get:k,getMultiple:C,getAll:R,store:M,remove:j,count:z,load:L,save:U};var f=n;let p={formatElapsedTime:w,getDocumentIndexId:I,getDocumentProperties:h,validateSchema:function e(t,r){for(let[n,o]of Object.entries(r)){let r=t[n];if(void 0!==r&&("geopoint"!==o||"object"!=typeof r||"number"!=typeof r.lon||"number"!=typeof r.lat)&&("enum"!==o||"string"!=typeof r&&"number"!=typeof r)){if("enum[]"===o&&Array.isArray(r)){let e=r.length;for(let t=0;t<e;t++)if("string"!=typeof r[t]&&"number"!=typeof r[t])return n+"."+t;continue}if(O(o)){let e=T(o);if(!Array.isArray(r)||r.length!==e)throw S("INVALID_INPUT_VECTOR",n,e,r.length);continue}if(N(o)){if(!Array.isArray(r))return n;let e=_[o],t=r.length;for(let o=0;o<t;o++)if(typeof r[o]!==e)return n+"."+o;continue}if("object"==typeof o){if(!r||"object"!=typeof r)return n;let t=e(r,o);if(t)return n+"."+t;continue}if(typeof r!==o)return n}}}};for(let e of W)if(f[e]){if("function"!=typeof f[e])throw S("COMPONENT_MUST_BE_FUNCTION",e)}else f[e]=p[e];for(let e of Object.keys(f))if(!B.includes(e)&&!W.includes(e))throw S("UNSUPPORTED_COMPONENT",e);let{getDocumentProperties:m,getDocumentIndexId:g,validateSchema:y,formatElapsedTime:b}=n,v={data:{},caches:{},schema:e,tokenizer:s,index:a,sorter:u,documentsStore:l,internalDocumentIDStore:c,getDocumentProperties:m,getDocumentIndexId:g,validateSchema:y,beforeInsert:[],afterInsert:[],beforeRemove:[],afterRemove:[],beforeUpdate:[],afterUpdate:[],beforeSearch:[],afterSearch:[],beforeInsertMultiple:[],afterInsertMultiple:[],beforeRemoveMultiple:[],afterRemoveMultiple:[],afterUpdateMultiple:[],beforeUpdateMultiple:[],afterCreate:[],formatElapsedTime:b,id:o,plugins:i,version:"{{VERSION}}"};for(let r of(v.data={index:v.index.create(v,c,e),docs:v.documentsStore.create(v,c),sorting:v.sorter.create(v,c,e,t)},F))v[r]=(v[r]??[]).concat(function(e,t){let r=[],n=e.plugins?.length;if(!n)return r;for(let o=0;o<n;o++)try{let n=e.plugins[o];"function"==typeof n[t]&&r.push(n[t])}catch(e){throw console.error("Caught error in getAllPluginsByHook:",e),S("PLUGIN_CRASHED")}return r}(v,r));let x=v.afterCreate;return x&&function(e,t){if(e.some(function e(t){return Array.isArray(t)?t.some(t=>e(t)):t?.constructor?.name==="AsyncFunction"}))return(async()=>{for(let r of e)await r(t)})();for(let r of e)r(t)}(x,v),v}function eV(e,t,r,n,o){let i=e.validateSchema(t,e.schema);if(i)throw createError("SCHEMA_VALIDATION_FAILURE",i);return isAsyncFunction(e.beforeInsert)||isAsyncFunction(e.afterInsert)||isAsyncFunction(e.index.beforeInsert)||isAsyncFunction(e.index.insert)||isAsyncFunction(e.index.afterInsert)?e$(e,t,r,n,o):function(e,t,r,n,o){let{index:i,docs:s}=e.data,a=e.getDocumentIndexId(t);if("string"!=typeof a)throw createError("DOCUMENT_ID_MUST_BE_STRING",typeof a);let l=getInternalDocumentId(e.internalDocumentIDStore,a);if(!e.documentsStore.store(s,a,l,t))throw createError("DOCUMENT_ALREADY_EXISTS",a);let u=e.documentsStore.count(s);n||runSingleHook(e.beforeInsert,e,a,t);let c=e.index.getSearchableProperties(i),d=e.index.getSearchablePropertiesWithTypes(i),f=e.getDocumentProperties(t,c);for(let[e,t]of Object.entries(f))void 0!==t&&eH(typeof t,d[e],e,t);return function(e,t,r,n,o,i,s,a){for(let s of r){let r=n[s];if(void 0===r)continue;let l=e.index.getSearchablePropertiesWithTypes(e.data.index)[s],u=getInternalDocumentId(e.internalDocumentIDStore,t);e.index.beforeInsert?.(e.data.index,s,t,r,l,i,e.tokenizer,o),e.index.insert(e.index,e.data.index,s,t,u,r,l,i,e.tokenizer,o,a),e.index.afterInsert?.(e.data.index,s,t,r,l,i,e.tokenizer,o)}let l=e.sorter.getSortableProperties(e.data.sorting),u=e.getDocumentProperties(s,l);for(let r of l){let n=u[r];if(void 0===n)continue;let o=e.sorter.getSortablePropertiesWithTypes(e.data.sorting)[r];e.sorter.insert(e.data.sorting,r,t,n,o,i)}}(e,a,c,f,u,r,t,o),n||runSingleHook(e.afterInsert,e,a,t),a}(e,t,r,n,o)}let eG=new Set(["enum","enum[]"]),eJ=new Set(["string","number"]);async function e$(e,t,r,n,o){let{index:i,docs:s}=e.data,a=e.getDocumentIndexId(t);if("string"!=typeof a)throw createError("DOCUMENT_ID_MUST_BE_STRING",typeof a);let l=getInternalDocumentId(e.internalDocumentIDStore,a);if(!e.documentsStore.store(s,a,l,t))throw createError("DOCUMENT_ALREADY_EXISTS",a);let u=e.documentsStore.count(s);n||await runSingleHook(e.beforeInsert,e,a,t);let c=e.index.getSearchableProperties(i),d=e.index.getSearchablePropertiesWithTypes(i),f=e.getDocumentProperties(t,c);for(let[e,t]of Object.entries(f))void 0!==t&&eH(typeof t,d[e],e,t);return await eY(e,a,c,f,u,r,t,o),n||await runSingleHook(e.afterInsert,e,a,t),a}function eH(e,t,r,n){if(!(isGeoPointType(t)&&"object"==typeof n&&"number"==typeof n.lon&&"number"==typeof n.lat||isVectorType(t)&&Array.isArray(n)||isArrayType(t)&&Array.isArray(n))&&!(eG.has(t)&&eJ.has(e))&&e!==t)throw createError("INVALID_DOCUMENT_PROPERTY",r,t,e)}async function eY(e,t,r,n,o,i,s,a){for(let s of r){let r=n[s];if(void 0===r)continue;let l=e.index.getSearchablePropertiesWithTypes(e.data.index)[s];await e.index.beforeInsert?.(e.data.index,s,t,r,l,i,e.tokenizer,o);let u=e.internalDocumentIDStore.idToInternalId.get(t);await e.index.insert(e.index,e.data.index,s,t,u,r,l,i,e.tokenizer,o,a),await e.index.afterInsert?.(e.data.index,s,t,r,l,i,e.tokenizer,o)}let l=e.sorter.getSortableProperties(e.data.sorting),u=e.getDocumentProperties(s,l);for(let r of l){let n=u[r];if(void 0===n)continue;let o=e.sorter.getSortablePropertiesWithTypes(e.data.sorting)[r];e.sorter.insert(e.data.sorting,r,t,n,o,i)}}async function eK(e,t,r,n){let o=!0,{index:i,docs:s}=e.data,a=e.documentsStore.get(s,t);if(!a)return!1;let l=getInternalDocumentId(e.internalDocumentIDStore,t),u=getDocumentIdFromInternalId(e.internalDocumentIDStore,l),c=e.documentsStore.count(s);n||await runSingleHook(e.beforeRemove,e,u);let d=e.index.getSearchableProperties(i),f=e.index.getSearchablePropertiesWithTypes(i),h=e.getDocumentProperties(a,d);for(let n of d){let i=h[n];if(void 0===i)continue;let s=f[n];await e.index.beforeRemove?.(e.data.index,n,u,i,s,r,e.tokenizer,c),await e.index.remove(e.index,e.data.index,n,t,l,i,s,r,e.tokenizer,c)||(o=!1),await e.index.afterRemove?.(e.data.index,n,u,i,s,r,e.tokenizer,c)}let p=await e.sorter.getSortableProperties(e.data.sorting),m=await e.getDocumentProperties(a,p);for(let r of p)void 0!==m[r]&&e.sorter.remove(e.data.sorting,r,t);return n||await runSingleHook(e.afterRemove,e,u),e.documentsStore.remove(e.data.docs,t,l),o}Symbol("orama.insertions"),Symbol("orama.removals")},71469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return a}});let n=r(88229),o=r(38883),i=r(33063),s=n._(r(51193));function a(e){let{props:t}=(0,o.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=i.Image},75100:(e,t)=>{"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:n,blurHeight:o,blurDataURL:i,objectFit:s}=e,a=n?40*n:t,l=o?40*o:r,u=a&&l?"viewBox='0 0 "+a+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+u+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(u?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+i+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},78169:(e,t,r)=>{"use strict";r.d(t,{$A:()=>s,YL:()=>l});var n=r(95155),o=r(12115);let i=(0,r(50344).q6)("SearchContext",{enabled:!1,hotKey:[],setOpenSearch:()=>void 0});function s(){return i.use()}function a(){let[e,t]=(0,o.useState)("⌘");return(0,o.useEffect)(()=>{window.navigator.userAgent.includes("Windows")&&t("Ctrl")},[]),e}function l(e){let{SearchDialog:t,children:r,preload:s=!0,options:l,hotKey:u=[{key:e=>e.metaKey||e.ctrlKey,display:(0,n.jsx)(a,{})},{key:"k",display:"K"}],links:c}=e,[d,f]=(0,o.useState)(!s&&void 0);return(0,o.useEffect)(()=>{let e=e=>{u.every(t=>"string"==typeof t.key?e.key===t.key:t.key(e))&&(f(!0),e.preventDefault())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[u]),(0,n.jsxs)(i.Provider,{value:(0,o.useMemo)(()=>({enabled:!0,hotKey:u,setOpenSearch:f}),[u]),children:[void 0!==d&&(0,n.jsx)(t,{open:d,onOpenChange:f,links:c,...l}),r]})}},85029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let n=r(12115),o=n.useLayoutEffect,i=n.useEffect;function s(e){let{headManager:t,reduceComponentsToState:r}=e;function s(){if(t&&t.mountedInstances){let o=n.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(r(o,e))}}return o(()=>{var r;return null==t||null==(r=t.mountedInstances)||r.add(e.children),()=>{var r;null==t||null==(r=t.mountedInstances)||r.delete(e.children)}}),o(()=>(t&&(t._pendingUpdate=s),()=>{t&&(t._pendingUpdate=s)})),i(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},86752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageConfigContext",{enumerable:!0,get:function(){return i}});let n=r(88229)._(r(12115)),o=r(95840),i=n.default.createContext(o.imageConfigDefault)},93014:(e,t,r)=>{"use strict";r.d(t,{Ct:()=>x,FI:()=>_,Rc:()=>y,Sk:()=>E,Xq:()=>I,dZ:()=>P,hx:()=>S,i:()=>b,iz:()=>w,vo:()=>v,y:()=>T});var n=r(95155),o=r(38686),i=r(12115),s=r(29697),a=r(39688),l=r(7936),u=r(15452),c=r(75624),d=r(98265),f=r(50344),h=r(63259);let p=(0,i.createContext)(null),m=(0,i.createContext)(null),g=(0,i.createContext)(null);function y(e){let{open:t,onOpenChange:r,search:o,onSearchChange:s,isLoading:a=!1,children:l}=e,[c,d]=(0,i.useState)(null);return(0,n.jsx)(u.lG,{open:t,onOpenChange:r,children:(0,n.jsx)(p.Provider,{value:(0,i.useMemo)(()=>({open:t,onOpenChange:r,search:o,onSearchChange:s,active:c,setActive:d,isLoading:a}),[c,a,r,s,t,o]),children:l})})}function b(e){return(0,n.jsx)("div",{...e,className:(0,a.QP)("flex flex-row items-center gap-2 px-3",e.className)})}function v(e){let{text:t}=(0,s.useI18n)(),{search:r,onSearchChange:o}=A();return(0,n.jsx)("input",{...e,value:r,onChange:e=>o(e.target.value),placeholder:t.search,className:"w-0 flex-1 bg-transparent py-3 text-base placeholder:text-fd-muted-foreground focus-visible:outline-none"})}function S(e){let{children:t=(0,n.jsx)(o.X,{}),className:r,...i}=e,{onOpenChange:s}=A();return(0,n.jsx)("button",{type:"button","aria-label":"Close",onClick:()=>s(!1),className:(0,a.QP)((0,l.r)({color:"ghost",size:"icon-sm",className:"text-fd-muted-foreground -me-1.5"}),r),...i,children:t})}function w(e){return(0,n.jsx)("div",{...e,className:(0,a.QP)("border-t bg-fd-secondary/50 p-3 empty:hidden",e.className)})}function I(e){return(0,n.jsx)(u.LC,{...e,className:(0,a.QP)("fixed inset-0 z-50 max-md:backdrop-blur-sm data-[state=open]:animate-fd-fade-in data-[state=closed]:animate-fd-fade-out",e.className)})}function x(e){let{children:t,...r}=e,{text:o}=(0,s.useI18n)();return(0,n.jsxs)(u.Cf,{"aria-describedby":void 0,...r,className:(0,a.QP)("fixed left-1/2 top-[10vh] z-50 w-[calc(100vw-2*var(--spacing))] max-w-screen-sm -translate-x-1/2 rounded-2xl border bg-fd-popover/50 backdrop-blur-lg text-fd-popover-foreground shadow-2xl overflow-hidden shadow-black/30 data-[state=closed]:animate-fd-dialog-out data-[state=open]:animate-fd-dialog-in",r.className),children:[(0,n.jsx)(u.L3,{className:"hidden",children:o.search}),t]})}function _(e){let{items:t=null,Empty:r=()=>(0,n.jsx)("div",{className:"py-12 text-center text-sm text-fd-muted-foreground",children:(0,n.jsx)(s.I18nLabel,{label:"searchNoResult"})}),Item:o=e=>(0,n.jsx)(N,{...e}),...l}=e,u=(0,i.useRef)(null),[c,p]=(0,i.useState)(()=>t&&t.length>0?t[0].id:null),{onOpenChange:g}=A(),y=(0,f.rd)(),b=e=>{var t;let{external:r,url:n}=e;r?null==(t=window.open(n,"_blank"))||t.focus():y.push(n),g(!1)},v=(0,d.J)(e=>{if(t){if("ArrowDown"===e.key||"ArrowUp"==e.key){var r,n;let o=t.findIndex(e=>e.id===c);-1===o?o=0:"ArrowDown"===e.key?o++:o--,p(null!=(n=null==(r=t.at(o%t.length))?void 0:r.id)?n:null),e.preventDefault()}if("Enter"===e.key){let r=t.find(e=>e.id===c);r&&b(r),e.preventDefault()}}});return(0,i.useEffect)(()=>{let e=u.current;if(!e)return;let t=new ResizeObserver(()=>{let t=e.firstElementChild;e.style.setProperty("--fd-animated-height","".concat(t.clientHeight,"px"))}),r=e.firstElementChild;return r&&t.observe(r),window.addEventListener("keydown",v),()=>{t.disconnect(),window.removeEventListener("keydown",v)}},[v]),(0,h.T)(t,()=>{t&&t.length>0&&p(t[0].id)}),(0,n.jsx)("div",{...l,ref:u,className:(0,a.QP)("overflow-hidden h-(--fd-animated-height) transition-[height]",t&&"border-t",l.className),children:(0,n.jsx)("div",{className:(0,a.QP)("w-full flex flex-col overflow-y-auto max-h-[460px]",!t&&"hidden"),children:(0,n.jsxs)(m.Provider,{value:(0,i.useMemo)(()=>({active:c,setActive:p}),[c]),children:[(null==t?void 0:t.length)===0&&r(),null==t?void 0:t.map(e=>(0,n.jsx)(i.Fragment,{children:o({item:e,onClick:()=>b(e)})},e.id))]})})})}let O={text:(0,n.jsx)(o.EY,{className:"size-4 shrink-0 text-fd-muted-foreground"}),heading:(0,n.jsx)(o.Vw,{className:"size-4 shrink-0 text-fd-muted-foreground"}),page:(0,n.jsx)(o.iU,{className:"size-4 shrink-0"})};function N(e){let{item:t,className:r,children:o,...s}=e,{active:l,setActive:u}=function(){let e=(0,i.useContext)(m);if(!e)throw Error("Missing <SearchDialogList />");return e}(),c=t.id===l;return(0,n.jsx)("button",{type:"button",ref:(0,i.useCallback)(e=>{c&&e&&e.scrollIntoView({block:"nearest"})},[c]),"aria-selected":c,className:(0,a.QP)("relative flex select-none flex-row items-center gap-2.5 px-3 py-2 text-start text-sm",c&&"bg-fd-accent text-fd-accent-foreground","page"!==t.type&&"ps-8",r),onPointerMove:()=>u(t.id),...s,children:null!=o?o:(0,n.jsxs)(n.Fragment,{children:["page"!==t.type&&(0,n.jsx)("div",{role:"none",className:"absolute start-5 inset-y-0 w-px bg-fd-border"}),O[t.type],(0,n.jsx)("p",{className:"min-w-0 truncate",children:t.content})]})})}function T(e){let{isLoading:t}=A();return(0,n.jsx)(o.vj,{...e,className:(0,a.QP)("size-4.5 text-fd-muted-foreground",t&&"animate-pulse duration-400",e.className)})}let D=(0,c.F)("rounded-md border px-2 py-0.5 text-xs font-medium text-fd-muted-foreground transition-colors",{variants:{active:{true:"bg-fd-accent text-fd-accent-foreground"}}});function E(e){let{tag:t,onTagChange:r,allowClear:o=!1,...s}=e;return(0,n.jsx)("div",{...s,className:(0,a.QP)("flex items-center gap-1 flex-wrap",s.className),children:(0,n.jsx)(g.Provider,{value:(0,i.useMemo)(()=>({value:t,onValueChange:r,allowClear:o}),[o,r,t]),children:s.children})})}function P(e){let{value:t,className:r,...o}=e,{onValueChange:s,value:l,allowClear:u}=function(){let e=(0,i.useContext)(g);if(!e)throw Error("Missing <TagsList />");return e}(),c=t===l;return(0,n.jsx)("button",{type:"button","data-active":c,className:(0,a.QP)(D({active:c,className:r})),onClick:()=>{s(c&&u?void 0:t)},tabIndex:-1,...o,children:o.children})}function A(){let e=(0,i.useContext)(p);if(!e)throw Error("Missing <SearchDialog />");return e}},95840:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{VALID_LOADERS:function(){return r},imageConfigDefault:function(){return n}});let r=["default","imgix","cloudinary","akamai","custom"],n={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:void 0,unoptimized:!1}},98265:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var n=r(12115);function o(e){let t=(0,n.useRef)(e);return t.current=e,(0,n.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.current(...r)},[])}}}]);