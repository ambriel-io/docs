"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98941],{13424:(e,t,r)=>{let s;r.d(t,{V:()=>Q});let n=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];var i=r(83846);let a={}.hasOwnProperty,o=/["&'<>`]/g,c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,h=/[|\\{}()[\]^$+*?.]/g,u=new WeakMap,p=/[\dA-Fa-f]/,d=/\d/,m=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],g={nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›",euro:"€"},f=["cent","copy","divide","gt","lt","not","para","times"],_={}.hasOwnProperty,y={};for(s in g)_.call(g,s)&&(y[g[s]]=s);let b=/[^\dA-Za-z]/;function C(e,t,r){let s,n=function(e,t,r){let s="&#x"+e.toString(16).toUpperCase();return r&&t&&!p.test(String.fromCharCode(t))?s:s+";"}(e,t,r.omitOptionalSemicolons);if((r.useNamedReferences||r.useShortestReferences)&&(s=function(e,t,r,s){let n=String.fromCharCode(e);if(_.call(y,n)){let e=y[n],i="&"+e;return r&&m.includes(e)&&!f.includes(e)&&(!s||t&&61!==t&&b.test(String.fromCharCode(t)))?i:i+";"}return""}(e,t,r.omitOptionalSemicolons,r.attribute)),(r.useShortestReferences||!s)&&r.useShortestReferences){let s=function(e,t,r){let s="&#"+String(e);return r&&t&&!d.test(String.fromCharCode(t))?s:s+";"}(e,t,r.omitOptionalSemicolons);s.length<n.length&&(n=s)}return s&&(!r.useShortestReferences||s.length<n.length)?s:n}function S(e,t){let r;var s,n=e,i=Object.assign({format:C},t);if(n=n.replace(i.subset?(s=i.subset,(r=u.get(s))||(r=function(e){let t=[],r=-1;for(;++r<e.length;)t.push(e[r].replace(h,"\\$&"));return RegExp("(?:"+t.join("|")+")","g")}(s),u.set(s,r)),r):o,a),i.subset||i.escapeOnly)return n;return n.replace(c,function(e,t,r){return i.format((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)-56320+65536,r.charCodeAt(t+2),i)}).replace(l,a);function a(e,t,r){return i.format(e.charCodeAt(0),r.charCodeAt(t+1),i)}}let N=/^>|^->|<!--|-->|--!>|<!-$/g,k=[">"],A=["<",">"];function w(e,t){let r=String(e);if("string"!=typeof t)throw TypeError("Expected character");let s=0,n=r.indexOf(t);for(;-1!==n;)s++,n=r.indexOf(t,n+t.length);return s}var P=r(55548),R=r(7887),v=r(14947),I=r(23145);let E=T(1),x=T(-1),G=[];function T(e){return function(t,r,s){let n=t?t.children:G,i=(r||0)+e,a=n[i];if(!s)for(;a&&(0,I.m)(a);)i+=e,a=n[i];return a}}let L={}.hasOwnProperty;function O(e){return function(t,r,s){return L.call(e,t.tagName)&&e[t.tagName](t,r,s)}}let B=O({body:function(e,t,r){let s=E(r,t);return!s||"comment"!==s.type},caption:M,colgroup:M,dd:function(e,t,r){let s=E(r,t);return!s||"element"===s.type&&("dt"===s.tagName||"dd"===s.tagName)},dt:function(e,t,r){let s=E(r,t);return!!(s&&"element"===s.type&&("dt"===s.tagName||"dd"===s.tagName))},head:M,html:function(e,t,r){let s=E(r,t);return!s||"comment"!==s.type},li:function(e,t,r){let s=E(r,t);return!s||"element"===s.type&&"li"===s.tagName},optgroup:function(e,t,r){let s=E(r,t);return!s||"element"===s.type&&"optgroup"===s.tagName},option:function(e,t,r){let s=E(r,t);return!s||"element"===s.type&&("option"===s.tagName||"optgroup"===s.tagName)},p:function(e,t,r){let s=E(r,t);return s?"element"===s.type&&("address"===s.tagName||"article"===s.tagName||"aside"===s.tagName||"blockquote"===s.tagName||"details"===s.tagName||"div"===s.tagName||"dl"===s.tagName||"fieldset"===s.tagName||"figcaption"===s.tagName||"figure"===s.tagName||"footer"===s.tagName||"form"===s.tagName||"h1"===s.tagName||"h2"===s.tagName||"h3"===s.tagName||"h4"===s.tagName||"h5"===s.tagName||"h6"===s.tagName||"header"===s.tagName||"hgroup"===s.tagName||"hr"===s.tagName||"main"===s.tagName||"menu"===s.tagName||"nav"===s.tagName||"ol"===s.tagName||"p"===s.tagName||"pre"===s.tagName||"section"===s.tagName||"table"===s.tagName||"ul"===s.tagName):!r||"element"!==r.type||"a"!==r.tagName&&"audio"!==r.tagName&&"del"!==r.tagName&&"ins"!==r.tagName&&"map"!==r.tagName&&"noscript"!==r.tagName&&"video"!==r.tagName},rp:$,rt:$,tbody:function(e,t,r){let s=E(r,t);return!s||"element"===s.type&&("tbody"===s.tagName||"tfoot"===s.tagName)},td:j,tfoot:function(e,t,r){return!E(r,t)},th:j,thead:function(e,t,r){let s=E(r,t);return!!(s&&"element"===s.type&&("tbody"===s.tagName||"tfoot"===s.tagName))},tr:function(e,t,r){let s=E(r,t);return!s||"element"===s.type&&"tr"===s.tagName}});function M(e,t,r){let s=E(r,t,!0);return!s||"comment"!==s.type&&!("text"===s.type&&(0,I.m)(s.value.charAt(0)))}function $(e,t,r){let s=E(r,t);return!s||"element"===s.type&&("rp"===s.tagName||"rt"===s.tagName)}function j(e,t,r){let s=E(r,t);return!s||"element"===s.type&&("td"===s.tagName||"th"===s.tagName)}let D=O({body:function(e){let t=E(e,-1,!0);return!t||"comment"!==t.type&&!("text"===t.type&&(0,I.m)(t.value.charAt(0)))&&("element"!==t.type||"meta"!==t.tagName&&"link"!==t.tagName&&"script"!==t.tagName&&"style"!==t.tagName&&"template"!==t.tagName)},colgroup:function(e,t,r){let s=x(r,t),n=E(e,-1,!0);return!(r&&s&&"element"===s.type&&"colgroup"===s.tagName&&B(s,r.children.indexOf(s),r))&&!!(n&&"element"===n.type&&"col"===n.tagName)},head:function(e){let t=new Set;for(let r of e.children)if("element"===r.type&&("base"===r.tagName||"title"===r.tagName)){if(t.has(r.tagName))return!1;t.add(r.tagName)}let r=e.children[0];return!r||"element"===r.type},html:function(e){let t=E(e,-1);return!t||"comment"!==t.type},tbody:function(e,t,r){let s=x(r,t),n=E(e,-1);return!(r&&s&&"element"===s.type&&("thead"===s.tagName||"tbody"===s.tagName)&&B(s,r.children.indexOf(s),r))&&!!(n&&"element"===n.type&&"tr"===n.tagName)}}),F={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\0	\n\f\r \"&'/<=>".split(""),"\0	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\0	\n\f\r \"&'<=>`".split("")],["\0	\n\f\r \"&'<=>`".split(""),"\0	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]},q=["<","&"];function W(e,t,r,s){return r&&"element"===r.type&&("script"===r.tagName||"style"===r.tagName)?e.value:S(e.value,Object.assign({},s.settings.characterReferences,{subset:q}))}let U=function(e,t){let r=t||{};function s(t,...r){let n=s.invalid,i=s.handlers;if(t&&a.call(t,e)){let r=String(t[e]);n=a.call(i,r)?i[r]:s.unknown}if(n)return n.call(this,t,...r)}return s.handlers=r.handlers||{},s.invalid=r.invalid,s.unknown=r.unknown,s}("type",{invalid:function(e){throw Error("Expected node, not `"+e+"`")},unknown:function(e){throw Error("Cannot compile unknown node `"+e.type+"`")},handlers:{comment:function(e,t,r,s){return s.settings.bogusComments?"<?"+S(e.value,Object.assign({},s.settings.characterReferences,{subset:k}))+">":"\x3c!--"+e.value.replace(N,function(e){return S(e,Object.assign({},s.settings.characterReferences,{subset:A}))})+"--\x3e"},doctype:function(e,t,r,s){return"<!"+(s.settings.upperDoctype?"DOCTYPE":"doctype")+(s.settings.tightDoctype?"":" ")+"html>"},element:function(e,t,r,s){let n,a=s.schema,o="svg"!==a.space&&s.settings.omitOptionalTags,c="svg"===a.space?s.settings.closeEmptyElements:s.settings.voids.includes(e.tagName.toLowerCase()),l=[];"html"===a.space&&"svg"===e.tagName&&(s.schema=i.JW);let h=function(e,t){let r,s=[],n=-1;if(t){for(r in t)if(null!==t[r]&&void 0!==t[r]){let n=function(e,t,r){let s,n=(0,R.I)(e.schema,t),i=e.settings.allowParseErrors&&"html"===e.schema.space?0:1,a=+!e.settings.allowDangerousCharacters,o=e.quote;if(n.overloadedBoolean&&(r===n.attribute||""===r)?r=!0:(n.boolean||n.overloadedBoolean)&&("string"!=typeof r||r===n.attribute||""===r)&&(r=!!r),null==r||!1===r||"number"==typeof r&&Number.isNaN(r))return"";let c=S(n.attribute,Object.assign({},e.settings.characterReferences,{subset:F.name[i][a]}));return!0===r||(r=Array.isArray(r)?(n.commaSeparated?P.A:v.A)(r,{padLeft:!e.settings.tightCommaSeparatedLists}):String(r),e.settings.collapseEmptyAttributes&&!r)?c:(e.settings.preferUnquoted&&(s=S(r,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:F.unquoted[i][a]}))),s!==r&&(e.settings.quoteSmart&&w(r,o)>w(r,e.alternative)&&(o=e.alternative),s=o+S(r,Object.assign({},e.settings.characterReferences,{subset:("'"===o?F.single:F.double)[i][a],attribute:!0}))+o),c+(s?"="+s:s))}(e,r,t[r]);n&&s.push(n)}}for(;++n<s.length;){let t=e.settings.tightAttributes?s[n].charAt(s[n].length-1):void 0;n!==s.length-1&&'"'!==t&&"'"!==t&&(s[n]+=" ")}return s.join("")}(s,e.properties),u=s.all("html"===a.space&&"template"===e.tagName?e.content:e);return s.schema=a,u&&(c=!1),!h&&o&&D(e,t,r)||(l.push("<",e.tagName,h?" "+h:""),c&&("svg"===a.space||s.settings.closeSelfClosing)&&(n=h.charAt(h.length-1),(!s.settings.tightSelfClosing||"/"===n||n&&'"'!==n&&"'"!==n)&&l.push(" "),l.push("/")),l.push(">")),l.push(u),c||o&&B(e,t,r)||l.push("</"+e.tagName+">"),l.join("")},raw:function(e,t,r,s){return s.settings.allowDangerousHtml?e.value:W(e,t,r,s)},root:function(e,t,r,s){return s.all(e)},text:W}}),z={},H={},K=[];function Q(e,t){let r=t||z,s=r.quote||'"';if('"'!==s&&"'"!==s)throw Error("Invalid quote `"+s+"`, expected `'` or `\"`");return({one:Y,all:X,settings:{omitOptionalTags:r.omitOptionalTags||!1,allowParseErrors:r.allowParseErrors||!1,allowDangerousCharacters:r.allowDangerousCharacters||!1,quoteSmart:r.quoteSmart||!1,preferUnquoted:r.preferUnquoted||!1,tightAttributes:r.tightAttributes||!1,upperDoctype:r.upperDoctype||!1,tightDoctype:r.tightDoctype||!1,bogusComments:r.bogusComments||!1,tightCommaSeparatedLists:r.tightCommaSeparatedLists||!1,tightSelfClosing:r.tightSelfClosing||!1,collapseEmptyAttributes:r.collapseEmptyAttributes||!1,allowDangerousHtml:r.allowDangerousHtml||!1,voids:r.voids||n,characterReferences:r.characterReferences||H,closeSelfClosing:r.closeSelfClosing||!1,closeEmptyElements:r.closeEmptyElements||!1},schema:"svg"===r.space?i.JW:i.qy,quote:s,alternative:'"'===s?"'":'"'}).one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function Y(e,t,r){return U(e,t,r,this)}function X(e){let t=[],r=e&&e.children||K,s=-1;for(;++s<r.length;)t[s]=this.one(r[s],s,e);return t.join("")}},58310:(e,t,r)=>{r.d(t,{DI:()=>eg,OR:()=>em,Sx:()=>p,j8:()=>S,zz:()=>f});var s=r(49509);function n(e,...t){return t.forEach(t=>{for(let r in t)e[r]=t[r]}),e}var i=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,a=class{static hasCaptures(e){return null!==e&&(i.lastIndex=0,i.test(e))}static replaceCaptures(e,t,r){return e.replace(i,(e,s,n,i)=>{let a=r[parseInt(s||n,10)];if(!a)return e;{let e=t.substring(a.start,a.end);for(;"."===e[0];)e=e.substring(1);switch(i){case"downcase":return e.toLowerCase();case"upcase":return e.toUpperCase();default:return e}}})}};function o(e,t){return e<t?-1:+(e>t)}function c(e,t){if(null===e&&null===t)return 0;if(!e)return -1;if(!t)return 1;let r=e.length,s=t.length;if(r===s){for(let s=0;s<r;s++){var n,i;let r=(n=e[s],n<(i=t[s])?-1:+(n>i));if(0!==r)return r}return 0}return r-s}function l(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function h(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var u=class{constructor(e){this.fn=e}cache=new Map;get(e){if(this.cache.has(e))return this.cache.get(e);let t=this.fn(e);return this.cache.set(e,t),t}},p=class{constructor(e,t,r){this._colorMap=e,this._defaults=t,this._root=r}static createFromRawTheme(e,t){return this.createFromParsedTheme(function(e){if(!e||!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,r=[],s=0;for(let e=0,n=t.length;e<n;e++){let n,i=t[e];if(!i.settings)continue;if("string"==typeof i.scope){let e=i.scope;n=(e=(e=e.replace(/^[,]+/,"")).replace(/[,]+$/,"")).split(",")}else n=Array.isArray(i.scope)?i.scope:[""];let a=-1;if("string"==typeof i.settings.fontStyle){a=0;let e=i.settings.fontStyle.split(" ");for(let t=0,r=e.length;t<r;t++)switch(e[t]){case"italic":a|=1;break;case"bold":a|=2;break;case"underline":a|=4;break;case"strikethrough":a|=8}}let o=null;"string"==typeof i.settings.foreground&&l(i.settings.foreground)&&(o=i.settings.foreground);let c=null;"string"==typeof i.settings.background&&l(i.settings.background)&&(c=i.settings.background);for(let t=0,i=n.length;t<i;t++){let i=n[t].trim().split(" "),l=i[i.length-1],h=null;i.length>1&&(h=i.slice(0,i.length-1)).reverse(),r[s++]=new g(l,h,e,a,o,c)}}return r}(e),t)}static createFromParsedTheme(e,t){return function(e,t){e.sort((e,t)=>{var r,s;let n=(r=e.scope,r<(s=t.scope)?-1:+(r>s));return 0!==n||0!==(n=c(e.parentScopes,t.parentScopes))?n:e.index-t.index});let r=0,s="#000000",n="#ffffff";for(;e.length>=1&&""===e[0].scope;){let t=e.shift();-1!==t.fontStyle&&(r=t.fontStyle),null!==t.foreground&&(s=t.foreground),null!==t.background&&(n=t.background)}let i=new _(t),a=new m(r,i.getId(s),i.getId(n)),o=new C(new b(0,null,-1,0,0),[]);for(let t=0,r=e.length;t<r;t++){let r=e[t];o.insert(0,r.scope,r.parentScopes,r.fontStyle,i.getId(r.foreground),i.getId(r.background))}return new p(i,a,o)}(e,t)}_cachedMatchRoot=new u(e=>this._root.match(e));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(null===e)return this._defaults;let t=e.scopeName,r=this._cachedMatchRoot.get(t).find(t=>(function(e,t){if(0===t.length)return!0;for(let n=0;n<t.length;n++){var r,s;let i=t[n],a=!1;if(">"===i){if(n===t.length-1)return!1;i=t[++n],a=!0}for(;e&&(r=e.scopeName,!((s=i)===r||r.startsWith(s)&&"."===r[s.length]));){if(a)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0})(e.parent,t.parentScopes));return r?new m(r.fontStyle,r.foreground,r.background):null}},d=class e{constructor(e,t){this.parent=e,this.scopeName=t}static push(t,r){for(let s of r)t=new e(t,s);return t}static from(...t){let r=null;for(let s=0;s<t.length;s++)r=new e(r,t[s]);return r}push(t){return new e(this,t)}getSegments(){let e=this,t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e||null!==this.parent&&this.parent.extends(e)}getExtensionIfDefined(e){let t=[],r=this;for(;r&&r!==e;)t.push(r.scopeName),r=r.parent;return r===e?t.reverse():void 0}},m=class{constructor(e,t,r){this.fontStyle=e,this.foregroundId=t,this.backgroundId=r}},g=class{constructor(e,t,r,s,n,i){this.scope=e,this.parentScopes=t,this.index=r,this.fontStyle=s,this.foreground=n,this.background=i}},f=(e=>(e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e))(f||{}),_=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,r=e.length;t<r;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(null===e)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}},y=Object.freeze([]),b=class e{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,t,r,s,n){this.scopeDepth=e,this.parentScopes=t||y,this.fontStyle=r,this.foreground=s,this.background=n}clone(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let r=0,s=e.length;r<s;r++)t[r]=e[r].clone();return t}acceptOverwrite(e,t,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==r&&(this.foreground=r),0!==s&&(this.background=s)}},C=class e{constructor(e,t=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=t}_rulesWithParentScopes;static _cmpBySpecificity(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;let r=0,s=0;for(;">"===e.parentScopes[r]&&r++,">"===t.parentScopes[s]&&s++,!(r>=e.parentScopes.length)&&!(s>=t.parentScopes.length);){let n=t.parentScopes[s].length-e.parentScopes[r].length;if(0!==n)return n;r++,s++}return t.parentScopes.length-e.parentScopes.length}match(t){if(""!==t){let e,r,s=t.indexOf(".");if(-1===s?(e=t,r=""):(e=t.substring(0,s),r=t.substring(s+1)),this._children.hasOwnProperty(e))return this._children[e].match(r)}let r=this._rulesWithParentScopes.concat(this._mainRule);return r.sort(e._cmpBySpecificity),r}insert(t,r,s,n,i,a){let o,c,l;if(""===r)return void this._doInsertHere(t,s,n,i,a);let h=r.indexOf(".");-1===h?(o=r,c=""):(o=r.substring(0,h),c=r.substring(h+1)),this._children.hasOwnProperty(o)?l=this._children[o]:(l=new e(this._mainRule.clone(),b.cloneArr(this._rulesWithParentScopes)),this._children[o]=l),l.insert(t+1,c,s,n,i,a)}_doInsertHere(e,t,r,s,n){if(null===t)return void this._mainRule.acceptOverwrite(e,r,s,n);for(let i=0,a=this._rulesWithParentScopes.length;i<a;i++){let a=this._rulesWithParentScopes[i];if(0===c(a.parentScopes,t))return void a.acceptOverwrite(e,r,s,n)}-1===r&&(r=this._mainRule.fontStyle),0===s&&(s=this._mainRule.foreground),0===n&&(n=this._mainRule.background),this._rulesWithParentScopes.push(new b(e,t,r,s,n))}},S=class e{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(t){let r=e.getLanguageId(t),s=e.getTokenType(t),n=e.getFontStyle(t);console.log({languageId:r,tokenType:s,fontStyle:n,foreground:e.getForeground(t),background:e.getBackground(t)})}static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return(1024&e)!=0}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(0xff8000&e)>>>15}static getBackground(e){return(0xff000000&e)>>>24}static set(t,r,s,n,i,a,o){let c=e.getLanguageId(t),l=e.getTokenType(t),h=+!!e.containsBalancedBrackets(t),u=e.getFontStyle(t),p=e.getForeground(t),d=e.getBackground(t);return 0!==r&&(c=r),8!==s&&(l=s),null!==n&&(h=+!!n),-1!==i&&(u=i),0!==a&&(p=a),0!==o&&(d=o),(0|c|l<<8|h<<10|u<<11|p<<15|d<<24)>>>0}};function N(e,t){var r;let s,n,i=[],a=(r=e,n=(s=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g).exec(r),{next:()=>{if(!n)return null;let e=n[0];return n=s.exec(r),e}}),o=a.next();for(;null!==o;){let e=0;if(2===o.length&&":"===o.charAt(1)){switch(o.charAt(0)){case"R":e=1;break;case"L":e=-1;break;default:console.log(`Unknown priority ${o} in scope selector`)}o=a.next()}let t=l();if(i.push({matcher:t,priority:e}),","!==o)break;o=a.next()}return i;function c(){if("-"===o){o=a.next();let e=c();return t=>!!e&&!e(t)}if("("===o){o=a.next();let e=function(){let e=[],t=l();for(;t&&(e.push(t),"|"===o||","===o);){do o=a.next();while("|"===o||","===o);t=l()}return t=>e.some(e=>e(t))}();return")"===o&&(o=a.next()),e}if(k(o)){let e=[];do e.push(o),o=a.next();while(k(o));return r=>t(e,r)}return null}function l(){let e=[],t=c();for(;t;)e.push(t),t=c();return t=>e.every(e=>e(t))}}function k(e){return!!e&&!!e.match(/[\w\.:]+/)}var A=(e=>(e[e.None=0]="None",e[e.NotBeginString=1]="NotBeginString",e[e.NotEndString=2]="NotEndString",e[e.NotBeginPosition=4]="NotBeginPosition",e[e.DebugCall=8]="DebugCall",e))(A||{});function w(e){"function"==typeof e.dispose&&e.dispose()}var P=class{constructor(e){this.scopeName=e}toKey(){return this.scopeName}},R=class{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}},v=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(e){let t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}},I=class{constructor(e,t){this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new P(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){let e=this.Q;this.Q=[];let t=new v;for(let r of e)!function(e,t,r,s){let n=r.lookup(e.scopeName);if(!n){if(e.scopeName===t)throw Error(`No grammar provided for <${t}>`);return}let i=r.lookup(t);e instanceof P?x({baseGrammar:i,selfGrammar:n},s):E(e.ruleName,{baseGrammar:i,selfGrammar:n,repository:n.repository},s);let a=r.injections(e.scopeName);if(a)for(let e of a)s.add(new P(e))}(r,this.initialScopeName,this.repo,t);for(let e of t.references)if(e instanceof P){if(this.seenFullScopeRequests.has(e.scopeName))continue;this.seenFullScopeRequests.add(e.scopeName),this.Q.push(e)}else{if(this.seenFullScopeRequests.has(e.scopeName)||this.seenPartialScopeRequests.has(e.toKey()))continue;this.seenPartialScopeRequests.add(e.toKey()),this.Q.push(e)}}};function E(e,t,r){t.repository&&t.repository[e]&&G([t.repository[e]],t,r)}function x(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&G(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&G(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function G(e,t,r){for(let s of e){if(r.visitedRule.has(s))continue;r.visitedRule.add(s);let e=s.repository?n({},t.repository,s.repository):t.repository;Array.isArray(s.patterns)&&G(s.patterns,{...t,repository:e},r);let i=s.include;if(!i)continue;let a=$(i);switch(a.kind){case 0:x({...t,selfGrammar:t.baseGrammar},r);break;case 1:x(t,r);break;case 2:E(a.ruleName,{...t,repository:e},r);break;case 3:case 4:let o=a.scopeName===t.selfGrammar.scopeName?t.selfGrammar:a.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(o){let s={baseGrammar:t.baseGrammar,selfGrammar:o,repository:e};4===a.kind?E(a.ruleName,s,r):x(s,r)}else 4===a.kind?r.add(new R(a.scopeName,a.ruleName)):r.add(new P(a.scopeName))}}}var T=class{kind=0},L=class{kind=1},O=class{constructor(e){this.ruleName=e}kind=2},B=class{constructor(e){this.scopeName=e}kind=3},M=class{constructor(e,t){this.scopeName=e,this.ruleName=t}kind=4};function $(e){if("$base"===e)return new T;if("$self"===e)return new L;let t=e.indexOf("#");return -1===t?new B(e):0===t?new O(e.substring(1)):new M(e.substring(0,t),e.substring(t+1))}var j=/\\(\d+)/,D=/\\(\d+)/g;Symbol("RuleId");var F=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,t,r,s){this.$location=e,this.id=t,this._name=r||null,this._nameIsCapturing=a.hasCaptures(this._name),this._contentName=s||null,this._contentNameIsCapturing=a.hasCaptures(this._contentName)}get debugName(){let e=this.$location?`${function e(t){let r=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return 0===r?t:~r==t.length-1?e(t.substring(0,t.length-1)):t.substr(~r+1)}(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?a.replaceCaptures(this._name,e,t):this._name}getContentName(e,t){return this._contentNameIsCapturing&&null!==this._contentName?a.replaceCaptures(this._contentName,e,t):this._contentName}},q=class extends F{retokenizeCapturedWithRuleId;constructor(e,t,r,s,n){super(e,t,r,s),this.retokenizeCapturedWithRuleId=n}dispose(){}collectPatterns(e,t){throw Error("Not supported!")}compile(e,t){throw Error("Not supported!")}compileAG(e,t,r,s){throw Error("Not supported!")}},W=class extends F{_match;captures;_cachedCompiledPatterns;constructor(e,t,r,s,n){super(e,t,r,null),this._match=new Q(s,this.id),this.captures=n,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,r,s){return this._getCachedCompiledPatterns(e).compileAG(e,r,s)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Y,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},U=class extends F{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,t,r,s,n){super(e,t,r,s),this.patterns=n.patterns,this.hasMissingPatterns=n.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(let r of this.patterns)e.getRule(r).collectPatterns(e,t)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,r,s){return this._getCachedCompiledPatterns(e).compileAG(e,r,s)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Y,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},z=class extends F{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,t,r,s,n,i,a,o,c,l){super(e,t,r,s),this._begin=new Q(n,this.id),this.beginCaptures=i,this._end=new Q(a||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=o,this.applyEndPatternLast=c||!1,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,r,s){return this._getCachedCompiledPatterns(e,t).compileAG(e,r,s)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){for(let t of(this._cachedCompiledPatterns=new Y,this.patterns))e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}},H=class extends F{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(e,t,r,s,n,i,a,o,c){super(e,t,r,s),this._begin=new Q(n,this.id),this.beginCaptures=i,this.whileCaptures=o,this._while=new Q(a,-2),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,r,s){return this._getCachedCompiledPatterns(e).compileAG(e,r,s)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns)for(let t of(this._cachedCompiledPatterns=new Y,this.patterns))e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns);return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,r,s){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,r,s)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Y,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||"￿"),this._cachedCompiledWhilePatterns}},K=class e{static createCaptureRule(e,t,r,s,n){return e.registerRule(e=>new q(t,e,r,s,n))}static getCompiledRuleId(t,r,s){return t.id||r.registerRule(i=>{if(t.id=i,t.match)return new W(t.$vscodeTextmateLocation,t.id,t.name,t.match,e._compileCaptures(t.captures,r,s));if(void 0===t.begin){t.repository&&(s=n({},s,t.repository));let i=t.patterns;return void 0===i&&t.include&&(i=[{include:t.include}]),new U(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,e._compilePatterns(i,r,s))}return t.while?new H(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,r,s),t.while,e._compileCaptures(t.whileCaptures||t.captures,r,s),e._compilePatterns(t.patterns,r,s)):new z(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,r,s),t.end,e._compileCaptures(t.endCaptures||t.captures,r,s),t.applyEndPatternLast,e._compilePatterns(t.patterns,r,s))}),t.id}static _compileCaptures(t,r,s){let n=[];if(t){let i=0;for(let e in t){if("$vscodeTextmateLocation"===e)continue;let t=parseInt(e,10);t>i&&(i=t)}for(let e=0;e<=i;e++)n[e]=null;for(let i in t){if("$vscodeTextmateLocation"===i)continue;let a=parseInt(i,10),o=0;t[i].patterns&&(o=e.getCompiledRuleId(t[i],r,s)),n[a]=e.createCaptureRule(r,t[i].$vscodeTextmateLocation,t[i].name,t[i].contentName,o)}}return n}static _compilePatterns(t,r,s){let n=[];if(t)for(let i=0,a=t.length;i<a;i++){let a=t[i],o=-1;if(a.include){let t=$(a.include);switch(t.kind){case 0:case 1:o=e.getCompiledRuleId(s[a.include],r,s);break;case 2:let n=s[t.ruleName];n&&(o=e.getCompiledRuleId(n,r,s));break;case 3:case 4:let i=t.scopeName,c=4===t.kind?t.ruleName:null,l=r.getExternalGrammar(i,s);if(l)if(c){let t=l.repository[c];t&&(o=e.getCompiledRuleId(t,r,l.repository))}else o=e.getCompiledRuleId(l.repository.$self,r,l.repository)}}else o=e.getCompiledRuleId(a,r,s);if(-1!==o){let e=r.getRule(o),t=!1;if((e instanceof U||e instanceof z||e instanceof H)&&e.hasMissingPatterns&&0===e.patterns.length&&(t=!0),t)continue;n.push(o)}}return{patterns:n,hasMissingPatterns:(t?t.length:0)!==n.length}}},Q=class e{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,t){if(e&&"string"==typeof e){let t=e.length,r=0,s=[],n=!1;for(let i=0;i<t;i++)if("\\"===e.charAt(i)&&i+1<t){let t=e.charAt(i+1);"z"===t?(s.push(e.substring(r,i)),s.push("$(?!\\n)(?<!\\n)"),r=i+2):("A"===t||"G"===t)&&(n=!0),i++}this.hasAnchor=n,0===r?this.source=e:(s.push(e.substring(r,t)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,"string"==typeof this.source?this.hasBackReferences=j.test(this.source):this.hasBackReferences=!1}clone(){return new e(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){if("string"!=typeof this.source)throw Error("This method should only be called if the source is a string");let r=t.map(t=>e.substring(t.start,t.end));return D.lastIndex=0,this.source.replace(D,(e,t)=>h(r[parseInt(t,10)]||""))}_buildAnchorCache(){let e,t,r,s;if("string"!=typeof this.source)throw Error("This method should only be called if the source is a string");let n=[],i=[],a=[],o=[];for(e=0,t=this.source.length;e<t;e++)r=this.source.charAt(e),n[e]=r,i[e]=r,a[e]=r,o[e]=r,"\\"===r&&e+1<t&&("A"===(s=this.source.charAt(e+1))?(n[e+1]="￿",i[e+1]="￿",a[e+1]="A",o[e+1]="A"):"G"===s?(n[e+1]="￿",i[e+1]="G",a[e+1]="￿",o[e+1]="G"):(n[e+1]=s,i[e+1]=s,a[e+1]=s,o[e+1]=s),e++);return{A0_G0:n.join(""),A0_G1:i.join(""),A1_G0:a.join(""),A1_G1:o.join("")}}resolveAnchors(e,t){if(!this.hasAnchor||!this._anchorCache||"string"!=typeof this.source)return this.source;if(e)if(t)return this._anchorCache.A1_G1;else return this._anchorCache.A1_G0;return t?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Y=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map(e=>e.source);this._cached=new X(e,t,this._items.map(e=>e.ruleId))}return this._cached}compileAG(e,t,r){if(!this._hasAnchors)return this.compile(e);if(t)if(r)return this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,r)),this._anchorCache.A1_G1;else return this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,r)),this._anchorCache.A1_G0;return r?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,r)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,r)),this._anchorCache.A0_G0)}_resolveAnchors(e,t,r){return new X(e,this._items.map(e=>e.resolveAnchors(t,r)),this._items.map(e=>e.ruleId))}},X=class{constructor(e,t,r){this.regExps=t,this.rules=r,this.scanner=e.createOnigScanner(t)}scanner;dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){let e=[];for(let t=0,r=this.rules.length;t<r;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}findNextMatchSync(e,t,r){let s=this.scanner.findNextMatchSync(e,t,r);return s?{ruleId:this.rules[s.index],captureIndices:s.captureIndices}:null}},V=class{constructor(e,t){this.languageId=e,this.tokenType=t}},J=class e{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,t){this._defaultAttributes=new V(e,8),this._embeddedLanguagesMatcher=new Z(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(t){return null===t?e._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}static _NULL_SCOPE_METADATA=new V(0,0);_getBasicScopeAttributes=new u(e=>new V(this._scopeToLanguage(e),this._toStandardTokenType(e)));_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(t){let r=t.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!r)return 8;switch(r[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},Z=class{values;scopesRegExp;constructor(e){if(0===e.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);let t=e.map(([e,t])=>h(e));t.sort(),t.reverse(),this.scopesRegExp=RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;let t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}};void 0!==s&&s.env.VSCODE_TEXTMATE_DEBUG;var ee=class{constructor(e,t){this.stack=e,this.stoppedEarly=t}};function et(e,t,r,s,n,i,a,o){let c=t.content.length,l=!1,h=-1;if(a){let a=function(e,t,r,s,n,i){let a=n.beginRuleCapturedEOL?0:-1,o=[];for(let t=n;t;t=t.pop()){let r=t.getRule(e);r instanceof H&&o.push({rule:r,stack:t})}for(let d=o.pop();d;d=o.pop()){var c,l,h,u,p;let{ruleScanner:o,findOptions:m}=(c=d.rule,l=e,h=d.stack.endRule,u=r,p=s===a,{ruleScanner:c.compileWhileAG(l,h,u,p),findOptions:0}),g=o.findNextMatchSync(t,s,m);if(g){if(-2!==g.ruleId){n=d.stack.pop();break}g.captureIndices&&g.captureIndices.length&&(i.produce(d.stack,g.captureIndices[0].start),es(e,t,r,d.stack,i,d.rule.whileCaptures,g.captureIndices),i.produce(d.stack,g.captureIndices[0].end),a=g.captureIndices[0].end,g.captureIndices[0].end>s&&(s=g.captureIndices[0].end,r=!1))}else{n=d.stack.pop();break}}return{stack:n,linePos:s,anchorPosition:a,isFirstLine:r}}(e,t,r,s,n,i);n=a.stack,s=a.linePos,r=a.isFirstLine,h=a.anchorPosition}let u=Date.now();for(;!l;){if(0!==o&&Date.now()-u>o)return new ee(n,!0);!function(){let a=function(e,t,r,s,n,i){let a=function(e,t,r,s,n,i){let{ruleScanner:a,findOptions:o}=er(n.getRule(e),e,n.endRule,r,s===i),c=a.findNextMatchSync(t,s,o);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}(e,t,r,s,n,i),o=e.getInjections();if(0===o.length)return a;let c=function(e,t,r,s,n,i,a){let o,c=Number.MAX_VALUE,l=null,h=0,u=i.contentNameScopesList.getScopeNames();for(let i=0,p=e.length;i<p;i++){let p=e[i];if(!p.matcher(u))continue;let{ruleScanner:d,findOptions:m}=er(t.getRule(p.ruleId),t,null,s,n===a),g=d.findNextMatchSync(r,n,m);if(!g)continue;let f=g.captureIndices[0].start;if(!(f>=c)&&(c=f,l=g.captureIndices,o=g.ruleId,h=p.priority,c===n))break}return l?{priorityMatch:-1===h,captureIndices:l,matchedRuleId:o}:null}(o,e,t,r,s,n,i);if(!c)return a;if(!a)return c;let l=a.captureIndices[0].start,h=c.captureIndices[0].start;return h<l||c.priorityMatch&&h===l?c:a}(e,t,r,s,n,h);if(!a){i.produce(n,c),l=!0;return}let o=a.captureIndices,u=a.matchedRuleId,p=!!o&&o.length>0&&o[0].end>s;if(-1===u){let a=n.getRule(e);i.produce(n,o[0].start),n=n.withContentNameScopesList(n.nameScopesList),es(e,t,r,n,i,a.endCaptures,o),i.produce(n,o[0].end);let u=n;if(n=n.parent,h=u.getAnchorPos(),!p&&u.getEnterPos()===s){n=u,i.produce(n,c),l=!0;return}}else{let a=e.getRule(u);i.produce(n,o[0].start);let d=n,m=a.getName(t.content,o),g=n.contentNameScopesList.pushAttributed(m,e);if(n=n.push(u,s,h,o[0].end===c,null,g,g),a instanceof z){es(e,t,r,n,i,a.beginCaptures,o),i.produce(n,o[0].end),h=o[0].end;let s=a.getContentName(t.content,o),u=g.pushAttributed(s,e);if(n=n.withContentNameScopesList(u),a.endHasBackReferences&&(n=n.withEndRule(a.getEndWithResolvedBackReferences(t.content,o))),!p&&d.hasSameRuleAs(n)){n=n.pop(),i.produce(n,c),l=!0;return}}else if(a instanceof H){es(e,t,r,n,i,a.beginCaptures,o),i.produce(n,o[0].end),h=o[0].end;let s=a.getContentName(t.content,o),u=g.pushAttributed(s,e);if(n=n.withContentNameScopesList(u),a.whileHasBackReferences&&(n=n.withEndRule(a.getWhileWithResolvedBackReferences(t.content,o))),!p&&d.hasSameRuleAs(n)){n=n.pop(),i.produce(n,c),l=!0;return}}else if(es(e,t,r,n,i,a.captures,o),i.produce(n,o[0].end),n=n.pop(),!p){n=n.safePop(),i.produce(n,c),l=!0;return}}o[0].end>s&&(s=o[0].end,r=!1)}()}return new ee(n,!1)}function er(e,t,r,s,n){return{ruleScanner:e.compileAG(t,r,s,n),findOptions:0}}function es(e,t,r,s,n,i,a){if(0===i.length)return;let o=t.content,c=Math.min(i.length,a.length),l=[],h=a[0].end;for(let t=0;t<c;t++){let c=i[t];if(null===c)continue;let u=a[t];if(0===u.length)continue;if(u.start>h)break;for(;l.length>0&&l[l.length-1].endPos<=u.start;)n.produceFromScopes(l[l.length-1].scopes,l[l.length-1].endPos),l.pop();if(l.length>0?n.produceFromScopes(l[l.length-1].scopes,u.start):n.produce(s,u.start),c.retokenizeCapturedWithRuleId){let t=c.getName(o,a),i=s.contentNameScopesList.pushAttributed(t,e),l=c.getContentName(o,a),h=i.pushAttributed(l,e),p=s.push(c.retokenizeCapturedWithRuleId,u.start,-1,!1,null,i,h),d=e.createOnigString(o.substring(0,u.end));et(e,d,r&&0===u.start,u.start,p,n,!1,0),w(d);continue}let p=c.getName(o,a);if(null!==p){let t=(l.length>0?l[l.length-1].scopes:s.contentNameScopesList).pushAttributed(p,e);l.push(new en(t,u.end))}}for(;l.length>0;)n.produceFromScopes(l[l.length-1].scopes,l[l.length-1].endPos),l.pop()}var en=class{scopes;endPos;constructor(e,t){this.scopes=e,this.endPos=t}};function ei(e,t,r,s,n){let i=N(t,ea),a=K.getCompiledRuleId(r,s,n.repository);for(let r of i)e.push({debugSelector:t,matcher:r.matcher,ruleId:a,grammar:n,priority:r.priority})}function ea(e,t){if(t.length<e.length)return!1;let r=0;return e.every(e=>{for(let s=r;s<t.length;s++)if(function(e,t){if(!e)return!1;if(e===t)return!0;let r=t.length;return e.length>r&&e.substr(0,r)===t&&"."===e[r]}(t[s],e))return r=s+1,!0;return!1})}var eo=class{constructor(e,t,r,s,n,i,a,o){if(this._rootScopeName=e,this.balancedBracketSelectors=i,this._onigLib=o,this._basicScopeAttributesProvider=new J(r,s),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=a,this._grammar=ec(t,null),this._injections=null,this._tokenTypeMatchers=[],n)for(let e of Object.keys(n))for(let t of N(e,ea))this._tokenTypeMatchers.push({matcher:t.matcher,type:n[e]})}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(let e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){let e=[],t=this._rootScopeName,r=({lookup:e=>e===this._rootScopeName?this._grammar:this.getExternalGrammar(e),injections:e=>this._grammarRepository.injections(e)}).lookup(t);if(r){let s=r.injections;if(s)for(let t in s)ei(e,t,s[t],this,r);let n=this._grammarRepository.injections(t);n&&n.forEach(t=>{let r=this.getExternalGrammar(t);if(r){let t=r.injectionSelector;t&&ei(e,t,r,this,r)}})}return e.sort((e,t)=>e.priority-t.priority),e}getInjections(){return null===this._injections&&(this._injections=this._collectInjections()),this._injections}registerRule(e){let t=++this._lastRuleId,r=e(t);return this._ruleId2desc[t]=r,r}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){let r=this._grammarRepository.lookup(e);if(r)return this._includedGrammars[e]=ec(r,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,r=0){let s=this._tokenize(e,t,!1,r);return{tokens:s.lineTokens.getResult(s.ruleStack,s.lineLength),ruleStack:s.ruleStack,stoppedEarly:s.stoppedEarly}}tokenizeLine2(e,t,r=0){let s=this._tokenize(e,t,!0,r);return{tokens:s.lineTokens.getBinaryResult(s.ruleStack,s.lineLength),ruleStack:s.ruleStack,stoppedEarly:s.stoppedEarly}}_tokenize(e,t,r,s){let n;if(-1===this._rootId&&(this._rootId=K.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==eh.NULL)n=!1,t.reset();else{let e;n=!0;let r=this._basicScopeAttributesProvider.getDefaultAttributes(),s=this.themeProvider.getDefaults(),i=S.set(0,r.languageId,r.tokenType,null,s.fontStyle,s.foregroundId,s.backgroundId),a=this.getRule(this._rootId).getName(null,null);e=a?el.createRootAndLookUpScopeName(a,i,this):el.createRoot("unknown",i),t=new eh(null,this._rootId,-1,-1,!1,null,e,e)}e+="\n";let i=this.createOnigString(e),a=i.content.length,o=new ep(r,e,this._tokenTypeMatchers,this.balancedBracketSelectors),c=et(this,i,n,0,t,o,!0,s);return w(i),{lineLength:a,lineTokens:o,ruleStack:c.stack,stoppedEarly:c.stoppedEarly}}};function ec(e,t){return(e=function e(t){return Array.isArray(t)?function(t){let r=[];for(let s=0,n=t.length;s<n;s++)r[s]=e(t[s]);return r}(t):t instanceof RegExp?t:"object"==typeof t?function(t){let r={};for(let s in t)r[s]=e(t[s]);return r}(t):t}(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var el=class e{constructor(e,t,r){this.parent=e,this.scopePath=t,this.tokenAttributes=r}static fromExtension(t,r){let s=t,n=t?.scopePath??null;for(let t of r)s=new e(s,n=d.push(n,t.scopeNames),t.encodedTokenAttributes);return s}static createRoot(t,r){return new e(null,new d(null,t),r)}static createRootAndLookUpScopeName(t,r,s){let n=s.getMetadataForScope(t),i=new d(null,t),a=s.themeProvider.themeMatch(i),o=e.mergeAttributes(r,n,a);return new e(null,i,o)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return e.equals(this,t)}static equals(e,t){for(;;){if(e===t||!e&&!t)return!0;if(!e||!t||e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}static mergeAttributes(e,t,r){let s=-1,n=0,i=0;return null!==r&&(s=r.fontStyle,n=r.foregroundId,i=r.backgroundId),S.set(e,t.languageId,t.tokenType,null,s,n,i)}pushAttributed(t,r){if(null===t)return this;if(-1===t.indexOf(" "))return e._pushAttributed(this,t,r);let s=t.split(/ /g),n=this;for(let t of s)n=e._pushAttributed(n,t,r);return n}static _pushAttributed(t,r,s){let n=s.getMetadataForScope(r),i=t.scopePath.push(r),a=s.themeProvider.themeMatch(i),o=e.mergeAttributes(t.tokenAttributes,n,a);return new e(t,i,o)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){let t=[],r=this;for(;r&&r!==e;)t.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?t.reverse():void 0}},eh=class e{constructor(e,t,r,s,n,i,a,o){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=n,this.endRule=i,this.nameScopesList=a,this.contentNameScopesList=o,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new e(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(t){return null!==t&&e._equals(this,t)}static _equals(e,t){return e===t||!!this._structuralEquals(e,t)&&el.equals(e.contentNameScopesList,t.contentNameScopesList)}static _structuralEquals(e,t){for(;;){if(e===t||!e&&!t)return!0;if(!e||!t||e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){e._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,r,s,n,i,a,o){return new e(this,t,r,s,n,i,a,o)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){let e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(t,r){let s=el.fromExtension(t?.nameScopesList??null,r.nameScopesList);return new e(t,r.ruleId,r.enterPos??-1,r.anchorPos??-1,r.beginRuleCapturedEOL,r.endRule,s,el.fromExtension(s,r.contentNameScopesList))}},eu=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(e,t){this.balancedBracketScopes=e.flatMap(e=>"*"===e?(this.allowAny=!0,[]):N(e,ea).map(e=>e.matcher)),this.unbalancedBracketScopes=t.flatMap(e=>N(e,ea).map(e=>e.matcher))}get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(e){for(let t of this.unbalancedBracketScopes)if(t(e))return!1;for(let t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}},ep=class{constructor(e,t,r,s){this.balancedBracketSelectors=s,this._emitBinaryTokens=e,this._tokenTypeOverrides=r,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let r=e?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){let t=e?.getScopeNames()??[];for(let e of this._tokenTypeOverrides)e.matcher(t)&&(r=S.set(r,0,e.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(t))}if(s&&(r=S.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=t;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=t;return}let r=e?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:r}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);let r=new Uint32Array(this._binaryTokens.length);for(let e=0,t=this._binaryTokens.length;e<t;e++)r[e]=this._binaryTokens[e];return r}},ed=class{constructor(e,t){this._onigLib=t,this._theme=e}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(let e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,t,r,s,n){if(!this._grammars.has(e)){let i=this._rawGrammars.get(e);if(!i)return null;this._grammars.set(e,new eo(e,i,t,r,s,n,this,this._onigLib))}return this._grammars.get(e)}},em=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new ed(p.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(p.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,r){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,t,r){return this._loadGrammar(e,t,r.embeddedLanguages,r.tokenTypes,new eu(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,t,r,s,n){let i=new I(this._syncRegistry,e);for(;i.Q.length>0;)i.Q.map(e=>this._loadSingleGrammar(e.scopeName)),i.processQueue();return this._grammarForScopeName(e,t,r,s,n)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){let t=this._options.loadGrammar(e);if(t){let r="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,r)}}addGrammar(e,t=[],r=0,s=null){return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,t=0,r=null,s=null,n=null){return this._syncRegistry.grammarForScopeName(e,t,r,s,n)}},eg=eh.NULL}}]);